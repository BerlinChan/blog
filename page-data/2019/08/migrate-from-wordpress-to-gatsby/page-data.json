{"componentChunkName":"component---src-templates-post-template-js","path":"/2019/08/migrate-from-wordpress-to-gatsby/","result":{"data":{"markdownRemark":{"id":"3ab96f0b-4a51-561b-8088-ea8bf518e79e","html":"<!-- endExcerpt -->\n<p>之前<a href=\"/2019/08/why-leave-wordpress-and-aliyun/\">为什么弃用WordPress并搬离阿里云</a>中记的三点问题，\n导致我决定迁移网站，弃用 Wordpress 的替代方案比较过 Jekyll/Hexo/Gatsby 三种框架。</p>\n<ul>\n<li>Jekyll，虽然是 GitHub Pages 官方支持的静态内容生成框架，但是我对 Ruby 语言不熟悉，所以首先排除。</li>\n<li>Hexo，上手容易有很多中文教程，但是文档写的不好，很多 API 说明不容易找到，不过 StackOverflow 上有很多热心人的补充。我试着用 Hexo 搭建<a href=\"https://museum.berlinchan.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">旧站博物馆</a>，期间不喜欢主题中的模板引擎语法。</li>\n<li>Gatsby，是我迁移的选择。基于 React 优雅的组件构建，既能轻松搭上 SPA PWA 的现代化便车，也顺便在迁移中感受一下 GraphQL。</li>\n</ul>\n<h2 id=\"迁移工作\" style=\"position:relative;\"><a href=\"#%E8%BF%81%E7%A7%BB%E5%B7%A5%E4%BD%9C\" aria-label=\"迁移工作 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>迁移工作</h2>\n<p>迁移的前提是<strong>保证旧博客内容访问正常</strong>，最后方案可分为两部分工作：</p>\n<ol>\n<li>脱离 Wordpress 程序，将旧文章生成为静态文件</li>\n<li>搭建新站，将旧文章保持原来路径的导入到新站</li>\n</ol>\n<p>第一步脱离 Wordpress 程序，我用插件 WP2Static 将整站生成为静态 HTML 文件，注意生成前先将评论和不必要的插件关掉，\n我的阿里云虚主机全天处于半死的状态，所以我将文件和数据库放到本地的 WAMP 环境中运行，\n调大内存后，剩下工作这个插件做的已经很好了，有时候生成错误多试几次就好。</p>\n<p>生成的静态 HTML 页面中有很多冗余的 SVG 图标数据，还有其他冗余的标签，可以批处理精简掉，\n另外批量替换 URL 为存档地址，最后部署到 GitHub Pages。</p>\n<h2 id=\"基于-gatsby-搭建新站\" style=\"position:relative;\"><a href=\"#%E5%9F%BA%E4%BA%8E-gatsby-%E6%90%AD%E5%BB%BA%E6%96%B0%E7%AB%99\" aria-label=\"基于 gatsby 搭建新站 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>基于 Gatsby 搭建新站</h2>\n<p>Gatsby 有很多 <a href=\"https://www.gatsbyjs.org/starters/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">starter 项目</a>，最初我用<a href=\"https://github.com/alxshelepenok/gatsby-starter-lumen\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">gatsby-starter-lumen</a>作为 starter 开始的，\n它集成了我不准备使用的 Netlify CMS 功能，因为之前建<a href=\"https://museum.berlinchan.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">旧站博物馆</a>时候，\n发现 Netlify 的 CDN 加速，在大陆访问反而还没有 GitHub Pages 本身快，所以决定不使用 Netlify 服务。</p>\n<p>还有 Flow 和 Jest 也被我移除。起初想多用用测试框架和静态检查的，但发现频繁变动中写这些测试和检查太过繁琐。</p>\n<p>UI 方案引入 <a href=\"https://material-ui.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Material-UI</a>进行改造，并形成最终的样子。</p>\n<h2 id=\"将旧文章导入到-gatsby-新站\" style=\"position:relative;\"><a href=\"#%E5%B0%86%E6%97%A7%E6%96%87%E7%AB%A0%E5%AF%BC%E5%85%A5%E5%88%B0-gatsby-%E6%96%B0%E7%AB%99\" aria-label=\"将旧文章导入到 gatsby 新站 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>将旧文章导入到 Gatsby 新站</h2>\n<p>得益于 Gatsby 的</p>\n<blockquote>\n<p>Pull data from anywhere</p>\n</blockquote>\n<p>Wordpress 的旧文章很容易接入 GraphQL 并为生成器提供数据，使用 <code class=\"language-text\">gatsby-source-wordpress</code> 就行了，\n安装和配置见官方教程 <a href=\"https://www.gatsbyjs.org/tutorial/wordpress-source-plugin-tutorial/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">WordPress Source Plugin Tutorial</a>。</p>\n<p>然后我用接入的 Wordpress 旧站数据生成了目录及文章，并在文章中添加指向原存档旧页面的链接，像下图这样：\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/32e6b5c7f989615b9ca9b183cf5facd4/bc1df/archived-blog-tips.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.42105263157895%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACFUlEQVR42n1Qa2+bMBT1v1nXbdqmSdN+aJ/psk37MfnSQjXxCJAEkmBj3pDU4BicsAtppGrSejhcHV9zjc9BlAaapuma9qiqzmymqqplWSAs29F03TQNz/N0Xfd9PDVNEH80zXXdxWIexwmqWJXneRSFlNKqqhLoJVCiNM3yLKNBUBZFEidpmj4xhjEBcdjvD4eDlBJRGi4WC8d2AkKWnjeZTOqqgu12gITnBCGElH1/NwCWqNxs4J9hGEVJElDqzOc1500rRds2w0zTNEclh0UvpDy+qCwLGOBF2hF3n4aHLJQRlnR9wN4uxOZ0SgI4OnTmM8gCvC2Xnm3Z69UanKM0SaYAw3AdOwxwHIWWYTjWdD41HcsihPh4ZRia7UCIM3vmmIYOWWZ53l8bQoIv4HAIpSgKyAME3D/NsjiOGWMpHD+grmuwyjkXA+D+CAbmzmy1WvqYQKoBCcC+57pxEmOMy7Jc+2vf95erFQz3Tk9BABBEkGR5zXeb7XbLqlbuRR8QBDZw0Mf8dqL5h2gvmyLGTb2pt6moN13Xdl3TdeJF/S9RuBEKbdVAPNJGpY1CdgoRRz70hOXu4Zl95+UuulX4xzH7NGbffrPPP9jXX+xs9PTlZ995M2Jv79j7O3Y+Yu++9+LsFnbZ+R37MO4rUom4uOc3Cr9R+bXSi8t7fqXwq4dnQvP6VI+di9MHSMrmdWOveP4LziXuxAlIynAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/32e6b5c7f989615b9ca9b183cf5facd4/5ed05/archived-blog-tips.webp 190w,\n/static/32e6b5c7f989615b9ca9b183cf5facd4/9d76b/archived-blog-tips.webp 380w,\n/static/32e6b5c7f989615b9ca9b183cf5facd4/1ebe6/archived-blog-tips.webp 590w\"\n              sizes=\"(max-width: 590px) 100vw, 590px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/32e6b5c7f989615b9ca9b183cf5facd4/253c6/archived-blog-tips.png 190w,\n/static/32e6b5c7f989615b9ca9b183cf5facd4/810ee/archived-blog-tips.png 380w,\n/static/32e6b5c7f989615b9ca9b183cf5facd4/bc1df/archived-blog-tips.png 590w\"\n            sizes=\"(max-width: 590px) 100vw, 590px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/32e6b5c7f989615b9ca9b183cf5facd4/bc1df/archived-blog-tips.png\"\n            alt=\"archived-blog-tips\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>但这样接入 Wordpress 数据有个问题，每次更新生成网站都需要运行 Wordpress REST API。我的解决办法是将 GraphQL 查询结果存为 JSON 文件，\n而后用 <code class=\"language-text\">gatsby-transformer-json</code> 接入到 GraphQL，就可以完全脱离开 Wordpress 运行了。我存为的 JSON 文件如下图：\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 291px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4232a97a7b3ec00c8f5d312989683211/43cf9/archived-blog-json.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.47368421052632%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACG0lEQVR42n2T2W4TMRSG550QbTPj2Tfv23gmk43SkpaqwA0tSNwXtUXwGk15S84kIa0gIH22LPv89tnsUaH64+Xi9Oz49amxLitJWdOyJjXZzjVhWVmjOEFx+gdemGSEK+XGpusJK4sqSvIMRpwVcZZH6WZR/K1ci+Ospky5XrVtnL+o8EGUhCjOdhZBlAD7xXCAKbf9zPZzjIVxEwjkCIWjMB6hyA/jvbKteHM3ZgI8b/pZhQmTuiIMdggTWVn969mtGIDwaia6xQkoAaEN5VJbJ5QBMUQe7E3YLjAfRYc+aqYLKg3ouVTadUpb61rdtNZ1XBllGqkM5DiInok3wK6b/BYLqZpWSANe1FSAH+AFV5oIBSVE61i8dQGfaCYzSBgVknOubAPvS60ho5QLxiVhnA5ijGJIZOINdzyRuukxUxaAp7QbC2WVdaYdw01MmqyojnwUQAnW9h69fHjOqy+P3dVqfPXQX61mnx8m1zA/9teP008/xx9X4v2KvgO2xl45uxmYD1Tzr9MPP+z5nT3/Zpd33eV3d37fvr3XyztzdmuWt/X8Zmu/xguCQ2A0OvD9g9HRS9u1mEJoRApqrFGSS8mMUZAExvDGeIeHkiKI85pKqtz09AJSrW1XYeZHqR9lcBQmBUryMAWzDA3rJzYdlhY1xlyOFyclplDMfPhGQ+WA54Xc357w74jQizcXQ3Nal+bFf7pyJ/4Fs1gXzEBulVYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/4232a97a7b3ec00c8f5d312989683211/5ed05/archived-blog-json.webp 190w,\n/static/4232a97a7b3ec00c8f5d312989683211/e8ba4/archived-blog-json.webp 291w\"\n              sizes=\"(max-width: 291px) 100vw, 291px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/4232a97a7b3ec00c8f5d312989683211/253c6/archived-blog-json.png 190w,\n/static/4232a97a7b3ec00c8f5d312989683211/43cf9/archived-blog-json.png 291w\"\n            sizes=\"(max-width: 291px) 100vw, 291px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/4232a97a7b3ec00c8f5d312989683211/43cf9/archived-blog-json.png\"\n            alt=\"archived-blog-json\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"添加评论功能\" style=\"position:relative;\"><a href=\"#%E6%B7%BB%E5%8A%A0%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD\" aria-label=\"添加评论功能 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>添加评论功能</h2>\n<p>考虑过 Gitalk/Disqus/多说/Firebase/野狗，Firebase/Disqus 大陆用不了，Gitalk 只能用 GitHub 账号登陆，\n多说已经无法说🤐，野狗已停止运营。</p>\n<p>权衡后还是选择业界领先的 Disqus，反正这博客站访问的人少🤣</p>\n<h2 id=\"其它的尝试\" style=\"position:relative;\"><a href=\"#%E5%85%B6%E5%AE%83%E7%9A%84%E5%B0%9D%E8%AF%95\" aria-label=\"其它的尝试 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>其它的尝试</h2>\n<p>最开始尝试直接将 WP2Static 生成的静态 HTML 页放到 Gatsby 项目的 <code class=\"language-text\">/static</code> 目录下，因为该目录的内容会不经处理的直接拷贝至生成目录。\n然后用新站 Gatsby 生成目录指向这些旧文章，但这些链接就不在 SPA 的治下，前端路由会 404 找不到页面。</p>\n<p>或者使用 <code class=\"language-text\">gatsby-plugin-meta-redirect</code> <code class=\"language-text\">gatsby-plugin-client-side-redirect</code> 生成一个 redirect 的空页面用于重定向。\n但这样既然生成“空页面”了，还不如生成一篇完整的文章页，还能利用上 PWA 的 pre-fetch 特性。</p>\n<p>我在这些尝试上费了很多时间。</p>\n<h2 id=\"github-上好用的工具\" style=\"position:relative;\"><a href=\"#github-%E4%B8%8A%E5%A5%BD%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7\" aria-label=\"github 上好用的工具 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GitHub 上好用的工具</h2>\n<p>Gatsby 是一个快速发展中的新框架，将代码托管在 GitHub 上时，用市场中的 <a href=\"https://github.com/marketplace/dependabot-preview\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Dependabot Preview</a>\n或者 <a href=\"https://github.com/marketplace/renovate\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Renovate</a>，能很好帮我们更新 npm 依赖。\n<a href=\"/2019/08/imgBot-optimize-image-asset-for-github-pages-project\">使用 ImgBot 自动为 Github Pages 项目优化图片</a>，\n还有持续集成工具 <a href=\"https://github.com/marketplace/travis-ci\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Travis CI</a>。</p>\n<p>这些市场中的工具设计的简单易用，自动化的工作为我节省了大量时间。</p>\n<h2 id=\"总结\" style=\"position:relative;\"><a href=\"#%E6%80%BB%E7%BB%93\" aria-label=\"总结 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>总结</h2>\n<p>Gatsby 是个非常不错的框架，框架自身和插件轻松实现 SPA PWA 特性，静态页先天的 SEO 优化。\n我的迁移工作大概用了一个月业余时间，新站部署在 GitHub Pages 上，用阿里云 CDN 加速，访问速度体验较以前快了不少，Lighthouse 评分如下，并还可进一步改善：\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 760px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a446a0561c100f0b37614a7cc2f91421/7fbec/lighthouse-audit.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAABYlAAAWJQFJUiTwAAABaklEQVR42kWQ207jQAyG097CzXKoaNKMY88hmaRJSzJpElqhIhZVLUJCSIhdccHVstf7Fstb47Yc/rEsa6zP84+91Wrl+/7xj6PB8clgMDg9PTk4OPS8Xp/FeV/0+73eNnbFx822D1EUCRCawioBBCFgHIvUiDAEMdaiMGIkEGFqhUTBXSIVRQg7eYR8CNYlPl/4y+myCB+W+GsZqlTBYwtPHblkMwv/rOFnHZokfX39d319AyCklB6yIhxd5aPfzVmTzTP/5WZ41w7JkH9fBQ8OcnPbBH/Xw8tShEBvb/83m00QBES0hSVSzeraSV6k4/xy3rRtw97Kqixnjm0bo+ddzZ6LvOi6rqoqJhncvUxotOZQSkmlSMVKaf6Lc/WsriVJBCSpBUCWZYvFwjnHi/qE2finJJFVUsdxrNHG0tqUjJKJSa3VWu/3tCe/4Y8RiEy2SWzHxdRGbqKKfIqZ0WVWTs554Be2h98BaKNG9/aY/oEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a446a0561c100f0b37614a7cc2f91421/5ed05/lighthouse-audit.webp 190w,\n/static/a446a0561c100f0b37614a7cc2f91421/9d76b/lighthouse-audit.webp 380w,\n/static/a446a0561c100f0b37614a7cc2f91421/33466/lighthouse-audit.webp 760w,\n/static/a446a0561c100f0b37614a7cc2f91421/ca244/lighthouse-audit.webp 1140w,\n/static/a446a0561c100f0b37614a7cc2f91421/0d9bb/lighthouse-audit.webp 1166w\"\n              sizes=\"(max-width: 760px) 100vw, 760px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a446a0561c100f0b37614a7cc2f91421/253c6/lighthouse-audit.png 190w,\n/static/a446a0561c100f0b37614a7cc2f91421/810ee/lighthouse-audit.png 380w,\n/static/a446a0561c100f0b37614a7cc2f91421/b4918/lighthouse-audit.png 760w,\n/static/a446a0561c100f0b37614a7cc2f91421/c0204/lighthouse-audit.png 1140w,\n/static/a446a0561c100f0b37614a7cc2f91421/7fbec/lighthouse-audit.png 1166w\"\n            sizes=\"(max-width: 760px) 100vw, 760px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a446a0561c100f0b37614a7cc2f91421/b4918/lighthouse-audit.png\"\n            alt=\"lighthouse-audit\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>","excerpt":"","fields":{"slug":"/2019/08/migrate-from-wordpress-to-gatsby","categorySlugs":["/category/前端/"],"tagSlugs":["/tag/迁移/","/tag/blog/","/tag/gatsby/","/tag/wordpress/"]},"frontmatter":{"title":"博客从 Wordpress 迁移到 Gatsby","date":"2019-08-12T10:46:37.121Z","categories":["前端"],"description":"利用 Wordpress 插件 WP2Static 将内容静态化成 HTML，然后利用插件 gatsby-source-wordpress 提供的数据，为旧 blog 内容生成目录，并连接到静态化后的 HTML","tags":["迁移","blog","Gatsby","Wordpress"],"slug":"/2019/08/migrate-from-wordpress-to-gatsby","featured_media":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHElEQVR42nXK3UuDUBjH8fO39h900U1EUBSL0UVSrOlyOk1XY658O77Ml6O72IQin6PC/pwcRJgafHh4+PFFEwJdfFo8EeDinIthcpD3ZkiIoGuMd/WVkkIidEZKKa3EmHYzJIfwSwpylZSjVXJ0fHYhmIPFZqAGQ1EfzgweZ88RbcY1NA+g6SWksvvJSJZgZbz9wZnZzM5EY6v4X62yhpY+tGhrugrL97Ccatt7hehxpa2LeuyWSPegywoKL90L8uaRDRyyNzzamyHswB8YXL+YssGYwYoavi5SZR696Znj0nbpAPIxNHk2RH55d6ldn8gPjHpzxZ6f3rKjZeRXnp23YhRZ0MOGGFOCi1r99DcWoNSEHtZBYv5I//ENTky0CKsh8rsAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/476f8d517c98113c07e03f6689249a70/ed3fb/wordpress-to-gatsby.png","srcSet":"/static/476f8d517c98113c07e03f6689249a70/ed3fb/wordpress-to-gatsby.png 800w","sizes":"800px"},"sources":[{"srcSet":"/static/476f8d517c98113c07e03f6689249a70/e7773/wordpress-to-gatsby.webp 800w","type":"image/webp","sizes":"800px"}]},"width":800,"height":400}}}}},"prevPost":{"fields":{"slug":"/2019/08/imgBot-optimize-image-asset-for-github-project"},"frontmatter":{"title":"使用 ImgBot 自动为 Github 项目优化图片"}},"nextPost":{"fields":{"slug":"/2019/08/talk-about-xbox-1x-after-1-year"},"frontmatter":{"title":"Xbox One X 开箱及一年后感受"}}},"pageContext":{"slug":"/2019/08/migrate-from-wordpress-to-gatsby","prevPostSlug":"/2019/08/imgBot-optimize-image-asset-for-github-project","nextPostSlug":"/2019/08/talk-about-xbox-1x-after-1-year"}},"staticQueryHashes":["2727970573","3709504828","4110059069"],"slicesMap":{}}