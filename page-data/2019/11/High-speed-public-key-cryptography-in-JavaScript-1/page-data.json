{"componentChunkName":"component---src-templates-post-template-js","path":"/2019/11/High-speed-public-key-cryptography-in-JavaScript-1/","result":{"data":{"markdownRemark":{"id":"bb04c41b-5e7f-5f80-83c0-974439728cf3","html":"<!-- endExcerpt -->\n<p>这是一篇翻译。翻译已获得原作者授权。<br>\n原文：<a href=\"https://medium.com/sharenowtech/high-speed-public-key-cryptography-in-javascript-part-1-3eefb6f91f77\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://medium.com/sharenowtech/high-speed-public-key-cryptography-in-javascript-part-1-3eefb6f91f77</a><br>\n作者：<a href=\"https://medium.com/@kyberneees\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Rolando Santamaria Maso</a><br>\n翻译：陈柏林</p>\n<hr>\n<p>本文将讨论如何在 Javascript 中实现端到端的安全通信。\n使用最先进的加密库，我们展示了一个健壮的加密系统的基础。</p>\n<h1 id=\"基础\" style=\"position:relative;\"><a href=\"#%E5%9F%BA%E7%A1%80\" aria-label=\"基础 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>基础</h1>\n<p>在开始前，我们要讲两个入门概念。</p>\n<h2 id=\"公钥加密\" style=\"position:relative;\"><a href=\"#%E5%85%AC%E9%92%A5%E5%8A%A0%E5%AF%86\" aria-label=\"公钥加密 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>公钥加密</h2>\n<p>“公钥加密”(<a href=\"https://en.wikipedia.org/wiki/Public-key_cryptography\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Public Key Cryptography</a>)是一种使 Internet 安全的加密机制。</p>\n<p><strong>公钥加密</strong> 或称 <strong>非对称加密</strong>，是一种使用密钥对的加密系统，其 <em>公钥</em> 可以广泛散播，<em>私钥</em> 只有所有者才知道。\n它可运用于两方面：</p>\n<ul>\n<li>身份验证（用公钥验证配对的私钥的持有者发送的消息）</li>\n<li>加密（私钥持有者解密用公钥加密的消息）</li>\n</ul>\n<p>使用公钥加密系统的示例：</p>\n<ul>\n<li>SSL/TLS 握手</li>\n<li><a href=\"https://www.whatsapp.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Whatsapp</a></li>\n<li><a href=\"https://threema.ch/en\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Threema</a></li>\n<li>PGP &#x26; <a href=\"https://www.openpgp.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">OpenPGP</a></li>\n<li>其他成千上万的应用……</li>\n</ul>\n<h2 id=\"nacl--tweetnacljs\" style=\"position:relative;\"><a href=\"#nacl--tweetnacljs\" aria-label=\"nacl  tweetnacljs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NaCL &#x26; TweetNaCL.js</h2>\n<blockquote>\n<p><a href=\"http://nacl.cr.yp.to/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">NaCl</a>(发音”salt”、“氯化钠”或”盐”) 是一个新的易于使用的高速软件库，用于网络通信、加密、解密、签名等。NaCl 的目标是提供构建高级加密工具所需的所有核心操作。</p>\n</blockquote>\n<p>NaCL 项目由我们时代最杰出的计算机科学家之一 <a href=\"http://cr.yp.to/djb.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><em>Daniel J.Bernstein</em></a> 领导。</p>\n<blockquote>\n<p>参考阅读 <a href=\"http://www.aaronsw.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Aaron Swartz</a> 对 Daniel J.Bernstein 的评论：<a href=\"http://www.aaronsw.com/weblog/djb\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://www.aaronsw.com/weblog/djb</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://cryptojedi.org/papers/coolnacl-20111201.pdf\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">具体来说，NaCl 使用椭圆曲线密码术，而不是 RSA；它使用椭圆曲线 Curve25519，具有几个高级的安全特性；它使用 Salsa20，而不是 AES(尽管它在边上包含了一个 AES实现)；它使用的是 Poly1305，而不是 HMAC；它使用的是 EdDSA，而不是 ECDSA。</a></p>\n</blockquote>\n<p>NaCL 被证明是安全的，因为从理论上讲，暴力破解 Salsa20 比相应的 AES 更昂贵。\n另一方面，Salsa20 在设计时考虑了速度，即使在低速 CPU 下也能提供出色的性能。Salsa20 速度的更详细的解释在这里：<a href=\"https://cr.yp.to/snuffle/speed.pdf\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://cr.yp.to/snuffle/speed.pdf</a></p>\n<p><strong>TweetNaCL</strong></p>\n<blockquote>\n<p><a href=\"http://tweetnacl.cr.yp.to/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">TweetNaCl</a> 是世界上第一个可审计的高安全性密码库。TweetNaCl 仅有 100条推文那么大，包含了 C <a href=\"http://nacl.cr.yp.to/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">NaCl</a> 的全部 25个函数。TweetNaCl 是一个自包含的公共 C 库，因此可以轻松地将其集成到应用程序中。</p>\n</blockquote>\n<p><a href=\"https://tweetnacl.js.org\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong><em>TweetNaCL.js</em></strong></a> 将 TweetNaCL 引入了 JavaScript，因此也引入了 Node.js 和 Web。它使用 <a href=\"https://cr.yp.to/snuffle/xsalsa-20110204.pdf\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong><em>XSalsa20</em></strong></a>(longer nonce) 流密码(stream cipher)代替 Salsa20。</p>\n<blockquote>\n<p>Javascript Benchmarks: <a href=\"https://github.com/dchest/tweetnacl-js/blob/master/README.md#benchmarks\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/dchest/tweetnacl-js/blob/master/README.md#benchmarks</a></p>\n</blockquote>\n<h1 id=\"开启-javascript-加密之旅\" style=\"position:relative;\"><a href=\"#%E5%BC%80%E5%90%AF-javascript-%E5%8A%A0%E5%AF%86%E4%B9%8B%E6%97%85\" aria-label=\"开启 javascript 加密之旅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>开启 JavaScript 加密之旅</h1>\n<p>译注：可直接运行的 <a href=\"/fb1940da477e3e5feeb2a20efc74450b/TweetNaClJsDemo.zip\">Demo 下载</a></p>\n<h2 id=\"bob-加密消息给-alice\" style=\"position:relative;\"><a href=\"#bob-%E5%8A%A0%E5%AF%86%E6%B6%88%E6%81%AF%E7%BB%99-alice\" aria-label=\"bob 加密消息给 alice permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bob 加密消息给 Alice</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> nacl <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tweetnacl'</span><span class=\"token punctuation\">)</span>\nnacl<span class=\"token punctuation\">.</span>util <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tweetnacl-util'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// reading Bob key pair from secret key</span>\n<span class=\"token keyword\">const</span> bob <span class=\"token operator\">=</span> nacl<span class=\"token punctuation\">.</span>box<span class=\"token punctuation\">.</span>keyPair<span class=\"token punctuation\">.</span><span class=\"token function\">fromSecretKey</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* Uint8Array with 32-byte secret key */</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// reading Alice public key</span>\n<span class=\"token keyword\">const</span> alice <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">publicKey</span><span class=\"token operator\">:</span> <span class=\"token comment\">/* Uint8Array with 32-byte secret key */</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// generating one time nonce for encryption</span>\n<span class=\"token keyword\">const</span> nonce <span class=\"token operator\">=</span> nacl<span class=\"token punctuation\">.</span><span class=\"token function\">randomBytes</span><span class=\"token punctuation\">(</span><span class=\"token number\">24</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// message for Alice</span>\n<span class=\"token keyword\">const</span> utf8 <span class=\"token operator\">=</span> <span class=\"token string\">'Hello Alice'</span>\n<span class=\"token comment\">// Bob encrypts message for Alice</span>\n<span class=\"token keyword\">const</span> box <span class=\"token operator\">=</span> nacl<span class=\"token punctuation\">.</span><span class=\"token function\">box</span><span class=\"token punctuation\">(</span>\n  nacl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span><span class=\"token function\">decodeUTF8</span><span class=\"token punctuation\">(</span>utf8<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  nonce<span class=\"token punctuation\">,</span>\n  alice<span class=\"token punctuation\">.</span>publicKey<span class=\"token punctuation\">,</span>\n  bob<span class=\"token punctuation\">.</span>secretKey\n<span class=\"token punctuation\">)</span>\n \n<span class=\"token comment\">// somehow send this message to Alice</span>\n<span class=\"token keyword\">const</span> message <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>box<span class=\"token punctuation\">,</span> nonce<span class=\"token punctuation\">}</span> </code></pre></div>\n<p><em>TweetNaCL.js 公钥加密的例子</em></p>\n<h2 id=\"alice-解密来自-bob-的消息\" style=\"position:relative;\"><a href=\"#alice-%E8%A7%A3%E5%AF%86%E6%9D%A5%E8%87%AA-bob-%E7%9A%84%E6%B6%88%E6%81%AF\" aria-label=\"alice 解密来自 bob 的消息 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Alice 解密来自 Bob 的消息</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> nacl <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tweetnacl'</span><span class=\"token punctuation\">)</span>\nnacl<span class=\"token punctuation\">.</span>util <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tweetnacl-util'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// reading Alice key pair from secret key</span>\n<span class=\"token keyword\">const</span> alice <span class=\"token operator\">=</span> nacl<span class=\"token punctuation\">.</span>box<span class=\"token punctuation\">.</span>keyPair<span class=\"token punctuation\">.</span><span class=\"token function\">fromSecretKey</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* Uint8Array with 32-byte secret key */</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// reading Bob public key</span>\n<span class=\"token keyword\">const</span> bob <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">publicKey</span><span class=\"token operator\">:</span> <span class=\"token comment\">/* Uint8Array with 32-byte secret key */</span><span class=\"token punctuation\">}</span>\n             \n<span class=\"token comment\">// const message = ... the message object from Bob</span>\n<span class=\"token comment\">// Alice decrypts message from Bob</span>\n<span class=\"token keyword\">const</span> payload <span class=\"token operator\">=</span> nacl<span class=\"token punctuation\">.</span>box<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span>box<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span>nonce<span class=\"token punctuation\">,</span> bob<span class=\"token punctuation\">.</span>publicKey<span class=\"token punctuation\">,</span> alice<span class=\"token punctuation\">.</span>secretKey<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> utf8 <span class=\"token operator\">=</span> nacl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span><span class=\"token function\">encodeUTF8</span><span class=\"token punctuation\">(</span>payload<span class=\"token punctuation\">)</span> <span class=\"token comment\">// &lt;-- 'Hello Alice'</span></code></pre></div>\n<p><em>TweetNaCL.js 私钥解密的例子</em></p>\n<h2 id=\"使用预先计算的共享密钥\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8%E9%A2%84%E5%85%88%E8%AE%A1%E7%AE%97%E7%9A%84%E5%85%B1%E4%BA%AB%E5%AF%86%E9%92%A5\" aria-label=\"使用预先计算的共享密钥 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用预先计算的共享密钥</h2>\n<p>对等两点之间的加密/解密会话，建议使用预先计算的共享密钥：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Bob pre-computes shared key with Alice (one time)</span>\n<span class=\"token keyword\">const</span> sharedKey <span class=\"token operator\">=</span> nacl<span class=\"token punctuation\">.</span>box<span class=\"token punctuation\">.</span><span class=\"token function\">before</span><span class=\"token punctuation\">(</span>alice<span class=\"token punctuation\">.</span>publicKey<span class=\"token punctuation\">,</span> bob<span class=\"token punctuation\">.</span>secretKey<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// generating one time nonce for encryption</span>\n<span class=\"token keyword\">const</span> nonce <span class=\"token operator\">=</span> nacl<span class=\"token punctuation\">.</span><span class=\"token function\">randomBytes</span><span class=\"token punctuation\">(</span><span class=\"token number\">24</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Bob encrypt message for Alice</span>\n<span class=\"token keyword\">const</span> box <span class=\"token operator\">=</span> nacl<span class=\"token punctuation\">.</span>box<span class=\"token punctuation\">.</span><span class=\"token function\">after</span><span class=\"token punctuation\">(</span>\n  nacl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span><span class=\"token function\">decodeUTF8</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello Alice'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  nonce<span class=\"token punctuation\">,</span>\n  sharedKey <span class=\"token comment\">// &lt;-- using shared key</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> message <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>box<span class=\"token punctuation\">,</span> nonce<span class=\"token punctuation\">}</span></code></pre></div>\n<p><em>TweetNaCL.js 使用共享密钥加密的例子</em></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Alice pre-computes shared key with Bob (one time)</span>\n<span class=\"token keyword\">const</span> sharedKey <span class=\"token operator\">=</span> nacl<span class=\"token punctuation\">.</span>box<span class=\"token punctuation\">.</span><span class=\"token function\">before</span><span class=\"token punctuation\">(</span>bob<span class=\"token punctuation\">.</span>publicKey<span class=\"token punctuation\">,</span> alice<span class=\"token punctuation\">.</span>secretKey<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> message <span class=\"token comment\">// &lt;-- message object from Bob side</span>\n<span class=\"token keyword\">const</span> payload <span class=\"token operator\">=</span> nacl<span class=\"token punctuation\">.</span>box<span class=\"token punctuation\">.</span>open<span class=\"token punctuation\">.</span><span class=\"token function\">after</span><span class=\"token punctuation\">(</span>\n  message<span class=\"token punctuation\">.</span>box<span class=\"token punctuation\">,</span> \n  message<span class=\"token punctuation\">.</span>nonce<span class=\"token punctuation\">,</span> \n  sharedKey <span class=\"token comment\">// &lt;-- using shared key</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// assert.equal('Hello Alice', nacl.util.encodeUTF8(payload))</span></code></pre></div>\n<p><em>TweetNaCL.js 使用共享密钥解密的例子</em></p>\n<h1 id=\"维护密钥\" style=\"position:relative;\"><a href=\"#%E7%BB%B4%E6%8A%A4%E5%AF%86%E9%92%A5\" aria-label=\"维护密钥 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>维护密钥</h1>\n<h2 id=\"公钥\" style=\"position:relative;\"><a href=\"#%E5%85%AC%E9%92%A5\" aria-label=\"公钥 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>公钥</h2>\n<p>”<em>公钥加密架构</em>“需要适当的方案来维护和认证某公钥确实属于某用户。尽管此过程不在本文讨论范围之内，但常见的解决方案包括将用户的公钥作为其个人资料页面的一部分进行维护，使其联系人可以通过查找目录来访问它。(译注：这类服务叫 <a href=\"https://en.wikipedia.org/wiki/Key_server_(cryptographic)\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Key Server</a>，例如 <a href=\"http://keys.gnupg.net/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">OpenPGPkeyserver</a>)</p>\n<h2 id=\"私钥\" style=\"position:relative;\"><a href=\"#%E7%A7%81%E9%92%A5\" aria-label=\"私钥 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>私钥</h2>\n<p>维护密钥要复杂得多，因为这是用户希望保密的非常敏感的信息。\n通常，这个过程是由用户负责的，并且在某种程度上，实现公钥加密的应用程序需要允许用户输入其私钥(绝不要将其传到服务器端，译注：参考<a href=\"https://github.com/mdrights/Digital-rights/blob/master/E%E5%8A%A0%E5%AF%86%E6%8A%80%E8%A1%93/2019-09-21-%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%E7%AB%AF%E5%88%B0%E7%AB%AF%E5%8A%A0%E5%AF%86%E4%B9%88.md\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">该文章</a>)。</p>\n<p>密钥通常使用离线安全存储机制或在线存储，使用强对称加密方法(如 <em>AES</em>)来保护密钥。\n将私钥在线存储，简化了将私钥添加进应用程序的过程(<em>仅用于客户端解密</em>)，例如：在登录阶段。</p>\n<h1 id=\"结论\" style=\"position:relative;\"><a href=\"#%E7%BB%93%E8%AE%BA\" aria-label=\"结论 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>结论</strong></h1>\n<p>本文介绍了 <em>公钥加密</em>，以及如何在 JavaScript中使用 <em>TweetNaCL.js</em> 库来实现它。</p>\n<blockquote>\n<p>使用 <em>XSalsa20</em> 而不是 <em>RSA</em>，<em>CPU</em> 使用和 <em>电池</em> 消耗降低到历史最低，同时保持强大的 <em>256位安全</em> 级别。\n—— 给你 App 的提示 ;)</p>\n</blockquote>\n<p>使用 <em>TweetNaCL.js</em> 进行 <strong><em>数字签名</em></strong> 将在该系列的第二篇文章中进行讨论：<a href=\"https://medium.com/@kyberneees/high-speed-public-key-cryptography-in-javascript-part-2-digital-signatures-3e58876d1dff\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">在此处阅读</a>。</p>\n<p>一如既往地感谢您的留言与反馈!</p>","excerpt":"","fields":{"slug":"/2019/11/High-speed-public-key-cryptography-in-JavaScript-1","categorySlugs":["/category/信息安全/"],"tagSlugs":["/tag/javascript/","/tag/node-js/","/tag/公钥加密/","/tag/翻译/"]},"frontmatter":{"title":"在 Javascript 中实现高速公钥加密(一)","date":"2019-11-15T10:46:37.121Z","categories":["信息安全"],"description":"本文介绍了如何在 JavaScript 中使用 TweetNaCL.js 库来实现公钥加密。NaCl 是一个新的易于使用的高速软件库，用于网络通信、加密解密、签名等。","tags":["Javascript","Node.js","公钥加密","翻译"],"slug":"/2019/11/High-speed-public-key-cryptography-in-JavaScript-1","featured_media":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQT/xAAVAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAABvvHeVGFAv//EABgQAQEBAQEAAAAAAAAAAAAAAAIBABID/9oACAEBAAEFAge4whN529K2rf/EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAEDAQE/Aaf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAgEBPwGH/8QAGBAAAwEBAAAAAAAAAAAAAAAAARAxACH/2gAIAQEABj8C4cI6v//EABkQAQEBAQEBAAAAAAAAAAAAAAEAESExgf/aAAgBAQABPyE8sLSVDxyPOQHil0KfsX//2gAMAwEAAgADAAAAEIcv/8QAFxEAAwEAAAAAAAAAAAAAAAAAARARIf/aAAgBAwEBPxCnC//EABYRAQEBAAAAAAAAAAAAAAAAAAEREP/aAAgBAgEBPxCBWf/EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQYHw/9oACAEBAAE/EGNDq6yS0ILFS/ZjAmhOKZpqGQoMCnk09n//2Q=="},"images":{"fallback":{"src":"/static/99da462669fa87f94c4b4b1771b4a95c/e737e/featured_media.jpg","srcSet":"/static/99da462669fa87f94c4b4b1771b4a95c/e737e/featured_media.jpg 800w","sizes":"800px"},"sources":[{"srcSet":"/static/99da462669fa87f94c4b4b1771b4a95c/e7773/featured_media.webp 800w","type":"image/webp","sizes":"800px"}]},"width":800,"height":400}}}}},"prevPost":{"fields":{"slug":"/2019/11/Windows-10-Built-In-MD5-Checksum-Calculator"},"frontmatter":{"title":"Windows 10(7) 内置 MD5 校验和计算工具"}},"nextPost":{"fields":{"slug":"/2019/11/qianjiang-marathon"},"frontmatter":{"title":"潜江返湾湖湿地马拉松健康跑"}}},"pageContext":{"slug":"/2019/11/High-speed-public-key-cryptography-in-JavaScript-1","prevPostSlug":"/2019/11/Windows-10-Built-In-MD5-Checksum-Calculator","nextPostSlug":"/2019/11/qianjiang-marathon"}},"staticQueryHashes":["2727970573","3709504828","4110059069"],"slicesMap":{}}