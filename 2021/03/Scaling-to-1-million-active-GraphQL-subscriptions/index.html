<!DOCTYPE html><html lang="zh-Hans" prefix="og: http://ogp.me/ns#"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-43244265-2"></script><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="generator" content="Gatsby 5.16.0"/><meta name="theme-color" content="#ff5722"/><meta name="description" content="Hasura 是基于 Postgres数据库的 GraphQL 引擎，提供可控制权限的开箱即用的 GraphQL API。到 hasura.io 和 github.com/hasura/graphql-engine 了解更多。" data-gatsby-head="true"/><meta property="og:url" content="https://www.berlinchan.com/2021/03/Scaling-to-1-million-active-GraphQL-subscriptions" data-gatsby-head="true"/><meta property="og:site_name" content="陈柏林的Blog" data-gatsby-head="true"/><meta property="og:type" content="article" data-gatsby-head="true"/><meta property="article:author" content="陈柏林" data-gatsby-head="true"/><meta property="og:title" content="借助 GraphQL 承载 100万并发活动订阅（实时查询） | 陈柏林的Blog" data-gatsby-head="true"/><meta property="og:description" content="Hasura 是基于 Postgres数据库的 GraphQL 引擎，提供可控制权限的开箱即用的 GraphQL API。到 hasura.io 和 github.com/hasura/graphql-engine 了解更多。" data-gatsby-head="true"/><meta property="og:image" content="https://www.berlinchan.com/static/17dfe767550a59c9ea75e82f07f0aa4e/ed3fb/featured_media.png" data-gatsby-head="true"/><meta property="og:image:secure_url" content="https://www.berlinchan.com/static/17dfe767550a59c9ea75e82f07f0aa4e/ed3fb/featured_media.png" data-gatsby-head="true"/><meta property="og:image:width" content="800" data-gatsby-head="true"/><meta property="og:image:height" content="400" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:site" content="@BerlinChanCom" data-gatsby-head="true"/><meta name="twitter:creator" content="@BerlinChanCom" data-gatsby-head="true"/><link rel="alternate" type="application/rss+xml" title="陈柏林的Blog RSS Feed" href="/rss.xml"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=d08587432fd7f864e0b9d6f9a08966e2" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=d08587432fd7f864e0b9d6f9a08966e2"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=d08587432fd7f864e0b9d6f9a08966e2"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=d08587432fd7f864e0b9d6f9a08966e2"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=d08587432fd7f864e0b9d6f9a08966e2"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=d08587432fd7f864e0b9d6f9a08966e2"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=d08587432fd7f864e0b9d6f9a08966e2"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=d08587432fd7f864e0b9d6f9a08966e2"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=d08587432fd7f864e0b9d6f9a08966e2"/><title data-gatsby-head="true">借助 GraphQL 承载 100万并发活动订阅（实时查询） - 陈柏林的Blog</title><style data-href="/styles.bedf8497fbfd7791aaf5.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@media (prefers-color-scheme:dark){.markdown-body{--color-prettylights-syntax-comment:#8b949e;--color-prettylights-syntax-constant:#79c0ff;--color-prettylights-syntax-entity:#d2a8ff;--color-prettylights-syntax-storage-modifier-import:#c9d1d9;--color-prettylights-syntax-entity-tag:#7ee787;--color-prettylights-syntax-keyword:#ff7b72;--color-prettylights-syntax-string:#a5d6ff;--color-prettylights-syntax-variable:#ffa657;--color-prettylights-syntax-brackethighlighter-unmatched:#f85149;--color-prettylights-syntax-invalid-illegal-text:#f0f6fc;--color-prettylights-syntax-invalid-illegal-bg:#8e1519;--color-prettylights-syntax-carriage-return-text:#f0f6fc;--color-prettylights-syntax-carriage-return-bg:#b62324;--color-prettylights-syntax-string-regexp:#7ee787;--color-prettylights-syntax-markup-list:#f2cc60;--color-prettylights-syntax-markup-heading:#1f6feb;--color-prettylights-syntax-markup-italic:#c9d1d9;--color-prettylights-syntax-markup-bold:#c9d1d9;--color-prettylights-syntax-markup-deleted-text:#ffdcd7;--color-prettylights-syntax-markup-deleted-bg:#67060c;--color-prettylights-syntax-markup-inserted-text:#aff5b4;--color-prettylights-syntax-markup-inserted-bg:#033a16;--color-prettylights-syntax-markup-changed-text:#ffdfb6;--color-prettylights-syntax-markup-changed-bg:#5a1e02;--color-prettylights-syntax-markup-ignored-text:#c9d1d9;--color-prettylights-syntax-markup-ignored-bg:#1158c7;--color-prettylights-syntax-meta-diff-range:#d2a8ff;--color-prettylights-syntax-brackethighlighter-angle:#8b949e;--color-prettylights-syntax-sublimelinter-gutter-mark:#484f58;--color-prettylights-syntax-constant-other-reference-link:#a5d6ff;--color-fg-default:#c9d1d9;--color-fg-muted:#8b949e;--color-fg-subtle:#484f58;--color-canvas-default:#0d1117;--color-canvas-subtle:#161b22;--color-border-default:#30363d;--color-border-muted:#21262d;--color-neutral-muted:rgba(110,118,129,0.4);--color-accent-fg:#58a6ff;--color-accent-emphasis:#1f6feb;--color-attention-subtle:rgba(187,128,9,0.15);--color-danger-fg:#f85149;color-scheme:dark}}@media (prefers-color-scheme:light){.markdown-body{--color-prettylights-syntax-comment:#6e7781;--color-prettylights-syntax-constant:#0550ae;--color-prettylights-syntax-entity:#8250df;--color-prettylights-syntax-storage-modifier-import:#24292f;--color-prettylights-syntax-entity-tag:#116329;--color-prettylights-syntax-keyword:#cf222e;--color-prettylights-syntax-string:#0a3069;--color-prettylights-syntax-variable:#953800;--color-prettylights-syntax-brackethighlighter-unmatched:#82071e;--color-prettylights-syntax-invalid-illegal-text:#f6f8fa;--color-prettylights-syntax-invalid-illegal-bg:#82071e;--color-prettylights-syntax-carriage-return-text:#f6f8fa;--color-prettylights-syntax-carriage-return-bg:#cf222e;--color-prettylights-syntax-string-regexp:#116329;--color-prettylights-syntax-markup-list:#3b2300;--color-prettylights-syntax-markup-heading:#0550ae;--color-prettylights-syntax-markup-italic:#24292f;--color-prettylights-syntax-markup-bold:#24292f;--color-prettylights-syntax-markup-deleted-text:#82071e;--color-prettylights-syntax-markup-deleted-bg:#ffebe9;--color-prettylights-syntax-markup-inserted-text:#116329;--color-prettylights-syntax-markup-inserted-bg:#dafbe1;--color-prettylights-syntax-markup-changed-text:#953800;--color-prettylights-syntax-markup-changed-bg:#ffd8b5;--color-prettylights-syntax-markup-ignored-text:#eaeef2;--color-prettylights-syntax-markup-ignored-bg:#0550ae;--color-prettylights-syntax-meta-diff-range:#8250df;--color-prettylights-syntax-brackethighlighter-angle:#57606a;--color-prettylights-syntax-sublimelinter-gutter-mark:#8c959f;--color-prettylights-syntax-constant-other-reference-link:#0a3069;--color-fg-default:#24292f;--color-fg-muted:#57606a;--color-fg-subtle:#6e7781;--color-canvas-default:#fff;--color-canvas-subtle:#f6f8fa;--color-border-default:#d0d7de;--color-border-muted:#d8dee4;--color-neutral-muted:rgba(175,184,193,0.2);--color-accent-fg:#0969da;--color-accent-emphasis:#0969da;--color-attention-subtle:#fff8c5;--color-danger-fg:#cf222e;color-scheme:light}}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;word-wrap:break-word;background-color:var(--color-canvas-default);color:var(--color-fg-default);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;margin:0}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{background-color:currentColor;content:" ";display:inline-block;height:16px;-webkit-mask-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 0 0 1.06 1.06l1.25-1.25a2 2 0 1 1 2.83 2.83l-2.5 2.5a2 2 0 0 1-2.83 0 .75.75 0 0 0-1.06 1.06 3.5 3.5 0 0 0 4.95 0l2.5-2.5a3.5 3.5 0 0 0-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 0 1 0-2.83l2.5-2.5a2 2 0 0 1 2.83 0 .75.75 0 0 0 1.06-1.06 3.5 3.5 0 0 0-4.95 0l-2.5 2.5a3.5 3.5 0 0 0 4.95 4.95l1.25-1.25a.75.75 0 0 0-1.06-1.06l-1.25 1.25a2 2 0 0 1-2.83 0z"/></svg>');mask-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 0 0 1.06 1.06l1.25-1.25a2 2 0 1 1 2.83 2.83l-2.5 2.5a2 2 0 0 1-2.83 0 .75.75 0 0 0-1.06 1.06 3.5 3.5 0 0 0 4.95 0l2.5-2.5a3.5 3.5 0 0 0-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 0 1 0-2.83l2.5-2.5a2 2 0 0 1 2.83 0 .75.75 0 0 0 1.06-1.06 3.5 3.5 0 0 0-4.95 0l-2.5 2.5a3.5 3.5 0 0 0 4.95 4.95l1.25-1.25a.75.75 0 0 0-1.06-1.06l-1.25 1.25a2 2 0 0 1-2.83 0z"/></svg>');width:16px}.markdown-body details,.markdown-body figcaption,.markdown-body figure{display:block}.markdown-body summary{display:list-item}.markdown-body [hidden]{display:none!important}.markdown-body a{background-color:transparent;color:var(--color-accent-fg);text-decoration:none}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body abbr[title]{border-bottom:none;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}.markdown-body b,.markdown-body strong{font-weight:600}.markdown-body dfn{font-style:italic}.markdown-body h1{border-bottom:1px solid var(--color-border-muted);font-size:2em;font-weight:600;margin:.67em 0;padding-bottom:.3em}.markdown-body mark{background-color:var(--color-attention-subtle);color:var(--color-text-primary)}.markdown-body small{font-size:90%}.markdown-body sub,.markdown-body sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.markdown-body sub{bottom:-.25em}.markdown-body sup{top:-.5em}.markdown-body img{background-color:var(--color-canvas-default);border-style:none;box-sizing:content-box;max-width:100%}.markdown-body code,.markdown-body kbd,.markdown-body pre,.markdown-body samp{font-family:monospace,monospace;font-size:1em}.markdown-body figure{margin:1em 40px}.markdown-body hr{background:transparent;background-color:var(--color-border-default);border:0;box-sizing:content-box;height:.25em;margin:24px 0;overflow:hidden;padding:0}.markdown-body input{font:inherit;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible}.markdown-body [type=button],.markdown-body [type=reset],.markdown-body [type=submit]{-webkit-appearance:button}.markdown-body [type=button]::-moz-focus-inner,.markdown-body [type=reset]::-moz-focus-inner,.markdown-body [type=submit]::-moz-focus-inner{border-style:none;padding:0}.markdown-body [type=button]:-moz-focusring,.markdown-body [type=reset]:-moz-focusring,.markdown-body [type=submit]:-moz-focusring{outline:1px dotted ButtonText}.markdown-body [type=checkbox],.markdown-body [type=radio]{box-sizing:border-box;padding:0}.markdown-body [type=number]::-webkit-inner-spin-button,.markdown-body [type=number]::-webkit-outer-spin-button{height:auto}.markdown-body [type=search]{-webkit-appearance:textfield;outline-offset:-2px}.markdown-body [type=search]::-webkit-search-cancel-button,.markdown-body [type=search]::-webkit-search-decoration{-webkit-appearance:none}.markdown-body ::-webkit-input-placeholder{color:inherit;opacity:.54}.markdown-body ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.markdown-body a:hover{text-decoration:underline}.markdown-body hr:after,.markdown-body hr:before{content:"";display:table}.markdown-body hr:after{clear:both}.markdown-body table{border-collapse:collapse;border-spacing:0;display:block;max-width:100%;overflow:auto;width:max-content}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none!important}.markdown-body kbd{background-color:var(--color-canvas-subtle);border-bottom-color:var(--color-neutral-muted);border:1px solid var(--color-neutral-muted);border-radius:6px;box-shadow:inset 0 -1px 0 var(--color-neutral-muted);color:var(--color-fg-default);display:inline-block;font:11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;line-height:10px;padding:3px 5px;vertical-align:middle}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:600;line-height:1.25;margin-bottom:16px;margin-top:24px}.markdown-body h2{border-bottom:1px solid var(--color-border-muted);font-size:1.5em;font-weight:600;padding-bottom:.3em}.markdown-body h3{font-size:1.25em;font-weight:600}.markdown-body h4{font-size:1em;font-weight:600}.markdown-body h5{font-size:.875em;font-weight:600}.markdown-body h6{color:var(--color-fg-muted);font-size:.85em;font-weight:600}.markdown-body p{margin-bottom:10px;margin-top:0}.markdown-body blockquote{border-left:.25em solid var(--color-border-default);color:var(--color-fg-muted);margin:0;padding:0 1em}.markdown-body ol,.markdown-body ul{margin-bottom:0;margin-top:0;padding-left:2em}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre,.markdown-body tt{font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:12px}.markdown-body pre{word-wrap:normal;margin-bottom:0;margin-top:0}.markdown-body .octicon{fill:currentColor;display:inline-block;overflow:visible!important;vertical-align:text-bottom}.markdown-body ::placeholder{color:var(--color-fg-subtle);opacity:1}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{appearance:none;margin:0}.markdown-body .pl-c{color:var(--color-prettylights-syntax-comment)}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:var(--color-prettylights-syntax-constant)}.markdown-body .pl-e,.markdown-body .pl-en{color:var(--color-prettylights-syntax-entity)}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:var(--color-prettylights-syntax-storage-modifier-import)}.markdown-body .pl-ent{color:var(--color-prettylights-syntax-entity-tag)}.markdown-body .pl-k{color:var(--color-prettylights-syntax-keyword)}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:var(--color-prettylights-syntax-string)}.markdown-body .pl-smw,.markdown-body .pl-v{color:var(--color-prettylights-syntax-variable)}.markdown-body .pl-bu{color:var(--color-prettylights-syntax-brackethighlighter-unmatched)}.markdown-body .pl-ii{background-color:var(--color-prettylights-syntax-invalid-illegal-bg);color:var(--color-prettylights-syntax-invalid-illegal-text)}.markdown-body .pl-c2{background-color:var(--color-prettylights-syntax-carriage-return-bg);color:var(--color-prettylights-syntax-carriage-return-text)}.markdown-body .pl-sr .pl-cce{color:var(--color-prettylights-syntax-string-regexp);font-weight:700}.markdown-body .pl-ml{color:var(--color-prettylights-syntax-markup-list)}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{color:var(--color-prettylights-syntax-markup-heading);font-weight:700}.markdown-body .pl-mi{color:var(--color-prettylights-syntax-markup-italic);font-style:italic}.markdown-body .pl-mb{color:var(--color-prettylights-syntax-markup-bold);font-weight:700}.markdown-body .pl-md{background-color:var(--color-prettylights-syntax-markup-deleted-bg);color:var(--color-prettylights-syntax-markup-deleted-text)}.markdown-body .pl-mi1{background-color:var(--color-prettylights-syntax-markup-inserted-bg);color:var(--color-prettylights-syntax-markup-inserted-text)}.markdown-body .pl-mc{background-color:var(--color-prettylights-syntax-markup-changed-bg);color:var(--color-prettylights-syntax-markup-changed-text)}.markdown-body .pl-mi2{background-color:var(--color-prettylights-syntax-markup-ignored-bg);color:var(--color-prettylights-syntax-markup-ignored-text)}.markdown-body .pl-mdr{color:var(--color-prettylights-syntax-meta-diff-range);font-weight:700}.markdown-body .pl-ba{color:var(--color-prettylights-syntax-brackethighlighter-angle)}.markdown-body .pl-sg{color:var(--color-prettylights-syntax-sublimelinter-gutter-mark)}.markdown-body .pl-corl{color:var(--color-prettylights-syntax-constant-other-reference-link);text-decoration:underline}.markdown-body [data-catalyst]{display:block}.markdown-body g-emoji{font-family:Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:1em;font-style:normal!important;font-weight:400;line-height:1;vertical-align:-.075em}.markdown-body g-emoji img{height:1em;width:1em}.markdown-body:after,.markdown-body:before{content:"";display:table}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:var(--color-danger-fg)}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-bottom:16px;margin-top:0}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body sup>a:before{content:"["}.markdown-body sup>a:after{content:"]"}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:var(--color-fg-default);vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit;padding:0 .2em}.markdown-body ol.no-list,.markdown-body ul.no-list{list-style-type:none;padding:0}.markdown-body ol[type="1"]{list-style-type:decimal}.markdown-body ol[type=a]{list-style-type:lower-alpha}.markdown-body ol[type=i]{list-style-type:lower-roman}.markdown-body div>ol:not([type]){list-style-type:decimal}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-bottom:0;margin-top:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{font-size:1em;font-style:italic;font-weight:600;margin-top:16px;padding:0}.markdown-body dl dd{margin-bottom:16px;padding:0 16px}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{border:1px solid var(--color-border-default);padding:6px 13px}.markdown-body table tr{background-color:var(--color-canvas-default);border-top:1px solid var(--color-border-muted)}.markdown-body table tr:nth-child(2n){background-color:var(--color-canvas-subtle)}.markdown-body table img{background-color:transparent}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{background-color:transparent;max-width:none;vertical-align:text-top}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{border:1px solid var(--color-border-default);display:block;float:left;margin:13px 0 0;overflow:hidden;padding:7px;width:auto}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{clear:both;color:var(--color-fg-default);display:block;padding:5px 0 0}.markdown-body span.align-center{clear:both;display:block;overflow:hidden}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{clear:both;display:block;overflow:hidden}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{background-color:var(--color-neutral-muted);border-radius:6px;font-size:85%;margin:0;padding:.2em .4em}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre code{font-size:100%}.markdown-body pre>code{background:transparent;border:0;margin:0;padding:0;white-space:pre;word-break:normal}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{border-radius:6px;font-size:85%;line-height:1.45;overflow:auto;padding:16px}.markdown-body pre code,.markdown-body pre tt{word-wrap:normal;background-color:transparent;border:0;display:inline;line-height:inherit;margin:0;max-width:auto;overflow:visible;padding:0}.markdown-body .csv-data td,.markdown-body .csv-data th{font-size:12px;line-height:1;overflow:hidden;padding:5px;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-num{background:var(--color-canvas-default);border:0;padding:10px 8px 9px;text-align:right}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{background:var(--color-canvas-subtle);border-top:0;font-weight:600}.markdown-body .footnotes{border-top:1px solid var(--color-border-default);color:var(--color-fg-muted);font-size:12px}.markdown-body .footnotes ol{padding-left:16px}.markdown-body .footnotes li{position:relative}.markdown-body .footnotes li:target:before{border:2px solid var(--color-accent-emphasis);border-radius:6px;bottom:-8px;content:"";left:-24px;pointer-events:none;position:absolute;right:-8px;top:-8px}.markdown-body .footnotes li:target{color:var(--color-fg-default)}.markdown-body .footnotes .data-footnote-backref g-emoji{font-family:monospace}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item label{font-weight:400}.markdown-body .task-list-item.enabled label{cursor:pointer}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item .handle{display:none}.markdown-body .task-list-item-checkbox{margin:0 .2em .25em -1.6em;vertical-align:middle}.markdown-body .contains-task-list:dir(rtl) .task-list-item-checkbox{margin:0 -1.6em .25em .2em}.markdown-body ::-webkit-calendar-picker-indicator{filter:invert(50%)}</style><style data-emotion="css-global 0"></style><style data-emotion="css-global o6gwfi">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="css 1c0c9m2 784rfr 1972fda 9lpcve ughsol 2wdn9 84nudp pz8mrn 4rxpbg 1hiehca 19v1jgj rcl8vx 9wvnva 9yvo9k 1vyu5pa 1x6h7g1 yjjqr3 68xjr0 1e0j580 16820zy 1yuhvjn wwkjos qbwvub 13dgk6d 1cef0gz hkx3jt q7mezt 1ebprri hibhi5 1n5khr6 1ubjslf 20tnkx 199nrdm fhbwnz 18b9ajk penf9g xz9haa 15zfxqh tzdv1b 16d0jw 177xvbk 1rfyg05 18q3puk 1pdhekk deih4v 14ecud3 2zp2ut osloyf">.css-1c0c9m2{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:var(--Paper-shadow);background-image:var(--Paper-overlay);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:fixed;z-index:1100;top:0;left:auto;right:0;--AppBar-background:#f5f5f5;--AppBar-color:rgba(0, 0, 0, 0.87);background-color:var(--AppBar-background);color:var(--AppBar-color);}@media print{.css-1c0c9m2{position:absolute;}}.css-784rfr{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:16px;padding-right:16px;min-height:56px;border-bottom:1px solid rgba(0, 0, 0, 0.12);}@media (min-width:600px){.css-784rfr{padding-left:24px;padding-right:24px;}}@media (min-width:0px){@media (orientation: landscape){.css-784rfr{min-height:48px;}}}@media (min-width:600px){.css-784rfr{min-height:64px;}}.css-1972fda{margin:0;font:inherit;line-height:inherit;letter-spacing:inherit;color:#ff5722;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:var(--Link-underlineColor);--Link-underlineColor:rgba(255, 87, 34, 0.4);margin-right:16px;}.css-1972fda:hover{text-decoration-color:inherit;}.css-9lpcve{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:40px;height:40px;font-family:"Roboto","Helvetica","Arial",sans-serif;font-size:1.25rem;line-height:1;border-radius:50%;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff;background-color:#bdbdbd;}.css-ughsol{margin:0;font:inherit;line-height:inherit;letter-spacing:inherit;color:#ff5722;-webkit-text-decoration:none;text-decoration:none;color:#ff5722;}.css-2wdn9{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1.25rem;line-height:1.334;letter-spacing:0em;text-align:var(--Typography-textAlign);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:inherit;}@media (min-width:600px){.css-2wdn9{font-size:1.3118rem;}}@media (min-width:900px){.css-2wdn9{font-size:1.4993rem;}}@media (min-width:1200px){.css-2wdn9{font-size:1.4993rem;}}.css-84nudp{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:auto;}.css-pz8mrn .MenuComponent-menuDropdown{width:200px;}.css-pz8mrn .MenuComponent-menuLink{width:100%;}.css-pz8mrn .MenuComponent-toolbarLink{padding:8px;}.css-pz8mrn .MenuComponent-activeLink{color:rgba(0, 0, 0, 0.54);}.css-4rxpbg{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;color:#ff5722;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-text-decoration:none;text-decoration:none;}.css-1hiehca{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;--IconButton-hoverBg:rgba(0, 0, 0, 0.04);margin-right:-12px;color:inherit;padding:12px;font-size:1.75rem;}.css-1hiehca::-moz-focus-inner{border-style:none;}.css-1hiehca.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-1hiehca{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-1hiehca:hover{background-color:var(--IconButton-hoverBg);}@media (hover: none){.css-1hiehca:hover{background-color:transparent;}}.css-1hiehca.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.css-1hiehca.MuiIconButton-loading{color:transparent;}@media (min-width:0px){.css-1hiehca{display:block;}}@media (min-width:600px){.css-1hiehca{display:none;}}.css-19v1jgj{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;fill:currentColor;font-size:1.5rem;color:#ff5722;}.css-rcl8vx{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:16px;padding-right:16px;min-height:56px;margin-bottom:24px;}@media (min-width:600px){.css-rcl8vx{padding-left:24px;padding-right:24px;}}@media (min-width:0px){@media (orientation: landscape){.css-rcl8vx{min-height:48px;}}}@media (min-width:600px){.css-rcl8vx{min-height:64px;}}.css-9wvnva{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;padding-left:16px;padding-right:16px;}@media (min-width:600px){.css-9wvnva{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.css-9wvnva{max-width:1200px;}}.css-9yvo9k{--Grid-columns:12;--Grid-columnSpacing:40px;--Grid-rowSpacing:40px;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;min-width:0;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:var(--Grid-rowSpacing) var(--Grid-columnSpacing);}.css-9yvo9k >*{--Grid-parent-columns:12;}.css-9yvo9k >*{--Grid-parent-columnSpacing:40px;}.css-9yvo9k >*{--Grid-parent-rowSpacing:40px;}.css-1vyu5pa{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 12 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 12) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));min-width:0;box-sizing:border-box;}@media (min-width:900px){.css-1vyu5pa{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 8 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 8) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}.css-1x6h7g1 .Post-date{margin-right:16px;}.css-1x6h7g1 .Post-category{margin-right:8px;}.css-1x6h7g1 .Post-tagList{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:4px;}.css-1x6h7g1 .Post-chip{margin:4px;}.css-1x6h7g1 .Post-shareButton{margin-left:8px;padding:8px;border-radius:50%;}.css-yjjqr3{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1.5625rem;line-height:1.235;letter-spacing:0.00735em;margin-bottom:0.35em;}@media (min-width:600px){.css-yjjqr3{font-size:1.8219rem;}}@media (min-width:900px){.css-yjjqr3{font-size:2.0243rem;}}@media (min-width:1200px){.css-yjjqr3{font-size:2.0243rem;}}.css-68xjr0{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;color:rgba(0, 0, 0, 0.6);display:inline;}.css-1e0j580{margin:0;font:inherit;line-height:inherit;letter-spacing:inherit;color:#ff5722;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:var(--Link-underlineColor);--Link-underlineColor:rgba(255, 87, 34, 0.4);}.css-1e0j580:hover{text-decoration-color:inherit;}.css-16820zy.Content-content{font-size:1.125rem;line-height:1.6;background-color:initial;}.css-16820zy.Content-content a{color:#ff5722;-webkit-text-decoration:none;text-decoration:none;}.css-1yuhvjn{margin-top:16px;}.css-wwkjos{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;max-width:100%;font-family:"Roboto","Helvetica","Arial",sans-serif;font-size:0.8125rem;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;height:32px;line-height:1.5;color:rgba(0, 0, 0, 0.87);background-color:rgba(0, 0, 0, 0.08);border-radius:16px;white-space:nowrap;-webkit-transition:background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;cursor:unset;outline:0;-webkit-text-decoration:none;text-decoration:none;border:0;padding:0;vertical-align:middle;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;cursor:pointer;background-color:transparent;border:1px solid #bdbdbd;}.css-wwkjos::-moz-focus-inner{border-style:none;}.css-wwkjos.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-wwkjos{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-wwkjos.Mui-disabled{opacity:0.38;pointer-events:none;}.css-wwkjos .MuiChip-avatar{margin-left:5px;margin-right:-6px;width:24px;height:24px;color:#616161;font-size:0.75rem;}.css-wwkjos .MuiChip-avatarColorPrimary{color:#fff;background-color:#e64a19;}.css-wwkjos .MuiChip-avatarColorSecondary{color:#fff;background-color:#5d4037;}.css-wwkjos .MuiChip-avatarSmall{margin-left:4px;margin-right:-4px;width:18px;height:18px;font-size:0.625rem;}.css-wwkjos .MuiChip-icon{margin-left:5px;margin-right:-6px;}.css-wwkjos .MuiChip-deleteIcon{-webkit-tap-highlight-color:transparent;color:rgba(0, 0, 0, 0.26);font-size:22px;cursor:pointer;margin:0 5px 0 -6px;}.css-wwkjos .MuiChip-deleteIcon:hover{color:rgba(0, 0, 0, 0.4);}.css-wwkjos .MuiChip-icon{color:#616161;}.css-wwkjos:hover{background-color:rgba(0, 0, 0, 0.12);}.css-wwkjos.Mui-focusVisible{background-color:rgba(0, 0, 0, 0.2);}.css-wwkjos:active{box-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);}.css-wwkjos.MuiChip-clickable:hover{background-color:rgba(0, 0, 0, 0.04);}.css-wwkjos.Mui-focusVisible{background-color:rgba(0, 0, 0, 0.12);}.css-wwkjos .MuiChip-avatar{margin-left:4px;}.css-wwkjos .MuiChip-avatarSmall{margin-left:2px;}.css-wwkjos .MuiChip-icon{margin-left:4px;}.css-wwkjos .MuiChip-iconSmall{margin-left:2px;}.css-wwkjos .MuiChip-deleteIcon{margin-right:5px;}.css-wwkjos .MuiChip-deleteIconSmall{margin-right:3px;}.css-qbwvub{overflow:hidden;text-overflow:ellipsis;padding-left:12px;padding-right:12px;white-space:nowrap;padding-left:11px;padding-right:11px;}.css-13dgk6d{margin-top:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-1cef0gz{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:1.125rem;line-height:1.6;letter-spacing:0.0075em;display:inline;}@media (min-width:600px){.css-1cef0gz{font-size:1.25rem;}}@media (min-width:900px){.css-1cef0gz{font-size:1.25rem;}}@media (min-width:1200px){.css-1cef0gz{font-size:1.25rem;}}.css-hkx3jt{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;}.css-hkx3jt::-moz-focus-inner{border-style:none;}.css-hkx3jt.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-hkx3jt{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-q7mezt{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;fill:currentColor;font-size:1.5rem;}.css-1ebprri{margin-top:16px;margin-bottom:16px;}.css-hibhi5{--Grid-columns:12;--Grid-columnSpacing:0px;--Grid-rowSpacing:0px;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;min-width:0;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;gap:var(--Grid-rowSpacing) var(--Grid-columnSpacing);-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}.css-hibhi5 >*{--Grid-parent-columns:12;}.css-hibhi5 >*{--Grid-parent-columnSpacing:0px;}.css-hibhi5 >*{--Grid-parent-rowSpacing:0px;}.css-hibhi5 .Pagination-nextNav{margin-left:auto;}.css-1n5khr6{min-width:0;box-sizing:border-box;}.css-1ubjslf{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:1.125rem;line-height:1.6;letter-spacing:0.0075em;color:#ff5722;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:var(--Link-underlineColor);--Link-underlineColor:rgba(255, 87, 34, 0.4);}@media (min-width:600px){.css-1ubjslf{font-size:1.25rem;}}@media (min-width:900px){.css-1ubjslf{font-size:1.25rem;}}@media (min-width:1200px){.css-1ubjslf{font-size:1.25rem;}}.css-1ubjslf:hover{text-decoration-color:inherit;}.css-20tnkx{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 12 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 12) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));min-width:0;box-sizing:border-box;}@media (min-width:900px){.css-20tnkx{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 4 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 4) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}.css-199nrdm{--Grid-columns:12;--Grid-columnSpacing:32px;--Grid-rowSpacing:32px;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;min-width:0;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:var(--Grid-rowSpacing) var(--Grid-columnSpacing);}.css-199nrdm >*{--Grid-parent-columns:12;}.css-199nrdm >*{--Grid-parent-columnSpacing:32px;}.css-199nrdm >*{--Grid-parent-rowSpacing:32px;}.css-fhbwnz{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 12 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 12) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));min-width:0;box-sizing:border-box;}@media (min-width:600px){.css-fhbwnz{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 6 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 6) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}@media (min-width:900px){.css-fhbwnz{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 12 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 12) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}.css-18b9ajk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:4px 8px;background-color:rgb(229, 229, 229);}.css-penf9g{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.75;letter-spacing:0.00938em;}.css-xz9haa{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;--IconButton-hoverBg:rgba(0, 0, 0, 0.04);padding:5px;font-size:1.125rem;}.css-xz9haa::-moz-focus-inner{border-style:none;}.css-xz9haa.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-xz9haa{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-xz9haa:hover{background-color:var(--IconButton-hoverBg);}@media (hover: none){.css-xz9haa:hover{background-color:transparent;}}.css-xz9haa.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.css-xz9haa.MuiIconButton-loading{color:transparent;}.css-15zfxqh{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;color:#ff5722;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block;-webkit-text-decoration:none;text-decoration:none;}.css-15zfxqh.Categories-link{padding:8px;}.css-15zfxqh.Categories-link:hover{background-color:rgb(229, 229, 229);}.css-15zfxqh.Categories-activeLink{color:rgba(0, 0, 0, 0.54);}.css-tzdv1b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:8px;}.css-16d0jw{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;color:#ff5722;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block;-webkit-text-decoration:none;text-decoration:none;}.css-16d0jw.Tags-tagLink{margin:0px 24px 4px 0px;}.css-16d0jw.Tags-activeLink{color:rgba(0, 0, 0, 0.54);}.css-177xvbk{--Grid-columns:12;--Grid-columnSpacing:24px;--Grid-rowSpacing:24px;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;min-width:0;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:var(--Grid-rowSpacing) var(--Grid-columnSpacing);}.css-177xvbk >*{--Grid-parent-columns:12;}.css-177xvbk >*{--Grid-parent-columnSpacing:24px;}.css-177xvbk >*{--Grid-parent-rowSpacing:24px;}.css-1rfyg05{min-width:0;box-sizing:border-box;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;gap:8px;}@media (min-width:900px){.css-1rfyg05{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 4 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 4) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}@media (min-width:0px){.css-1rfyg05{display:none;}}@media (min-width:900px){.css-1rfyg05{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-18q3puk{margin:0;font:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;-webkit-text-decoration:underline;text-decoration:underline;color:inherit;}.css-18q3puk:hover{text-decoration-color:inherit;}.css-1pdhekk{min-width:0;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media (min-width:600px){.css-1pdhekk{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 6 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 6) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}@media (min-width:900px){.css-1pdhekk{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 4 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 4) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}.css-deih4v{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;--IconButton-hoverBg:rgba(0, 0, 0, 0.04);padding:12px;font-size:1.75rem;}.css-deih4v::-moz-focus-inner{border-style:none;}.css-deih4v.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-deih4v{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-deih4v:hover{background-color:var(--IconButton-hoverBg);}@media (hover: none){.css-deih4v:hover{background-color:transparent;}}.css-deih4v.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.css-deih4v.MuiIconButton-loading{color:transparent;}.css-14ecud3{min-width:0;box-sizing:border-box;}@media (min-width:600px){.css-14ecud3{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 6 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 6) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}@media (min-width:900px){.css-14ecud3{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 4 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 4) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}.css-2zp2ut{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:0.875rem;line-height:1.43;letter-spacing:0.01071em;color:rgba(0, 0, 0, 0.6);}.css-osloyf{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-height:36px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border-radius:50%;padding:0;min-width:0;width:56px;height:56px;z-index:1050;box-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);color:rgba(0, 0, 0, 0.87);background-color:#e0e0e0;width:48px;height:48px;color:#fff;background-color:#8d6e63;position:fixed;bottom:16px;right:16px;}.css-osloyf::-moz-focus-inner{border-style:none;}.css-osloyf.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-osloyf{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-osloyf:active{box-shadow:0px 7px 8px -4px rgba(0,0,0,0.2),0px 12px 17px 2px rgba(0,0,0,0.14),0px 5px 22px 4px rgba(0,0,0,0.12);}.css-osloyf:hover{background-color:#f5f5f5;-webkit-text-decoration:none;text-decoration:none;}@media (hover: none){.css-osloyf:hover{background-color:#e0e0e0;}}.css-osloyf.Mui-focusVisible{box-shadow:0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);}.css-osloyf:hover{background-color:#5d4037;}@media (hover: none){.css-osloyf:hover{background-color:#8d6e63;}}.css-osloyf.Mui-disabled{color:rgba(0, 0, 0, 0.26);box-shadow:none;background-color:rgba(0, 0, 0, 0.12);}</style><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-43244265-2', {"send_page_view":false});
      }
      </script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation0 MuiAppBar-root MuiAppBar-colorDefault MuiAppBar-positionFixed mui-fixed css-1c0c9m2" style="--Paper-shadow:none"><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular css-784rfr"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-1972fda" href="/"><div class="MuiAvatar-root MuiAvatar-circular MuiAvatar-colorDefault css-9lpcve"><div data-gatsby-image-wrapper="" style="width:40px;height:40px" class="gatsby-image-wrapper"><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#d8c8c8;width:40px;height:40px;position:relative"></div><picture><source type="image/webp" data-srcset="/static/d08587432fd7f864e0b9d6f9a08966e2/e73fe/photo.webp 40w,/static/d08587432fd7f864e0b9d6f9a08966e2/61ca6/photo.webp 80w" sizes="40px"/><img data-gatsby-image-ssr="" layout="fixed" data-main-image="" style="opacity:0" sizes="40px" decoding="async" loading="lazy" data-src="/static/d08587432fd7f864e0b9d6f9a08966e2/2f28c/photo.jpg" data-srcset="/static/d08587432fd7f864e0b9d6f9a08966e2/2f28c/photo.jpg 40w,/static/d08587432fd7f864e0b9d6f9a08966e2/499f6/photo.jpg 80w" alt="陈柏林"/></picture><noscript><picture><source type="image/webp" srcSet="/static/d08587432fd7f864e0b9d6f9a08966e2/e73fe/photo.webp 40w,/static/d08587432fd7f864e0b9d6f9a08966e2/61ca6/photo.webp 80w" sizes="40px"/><img data-gatsby-image-ssr="" layout="fixed" data-main-image="" style="opacity:0" sizes="40px" decoding="async" loading="lazy" src="/static/d08587432fd7f864e0b9d6f9a08966e2/2f28c/photo.jpg" srcSet="/static/d08587432fd7f864e0b9d6f9a08966e2/2f28c/photo.jpg 40w,/static/d08587432fd7f864e0b9d6f9a08966e2/499f6/photo.jpg 80w" alt="陈柏林"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div></a><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineNone css-ughsol" href="/"><h2 class="MuiTypography-root MuiTypography-h5 MuiTypography-alignLeft MuiTypography-noWrap css-2wdn9" style="--Typography-textAlign:left">陈柏林的Blog</h2></a><div class="MuiBox-root css-84nudp"><div class="css-pz8mrn"><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone MenuComponent-toolbarLink css-4rxpbg" aria-haspopup="true" href="/page/">文章</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone MenuComponent-toolbarLink css-4rxpbg" target="_blank" rel="noopener" href="https://www.awildpetcat.com/">自由的家猫</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone MenuComponent-toolbarLink css-4rxpbg" target="_blank" rel="noopener" href="https://museum.berlinchan.com/">旧站博物馆</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone MenuComponent-toolbarLink css-4rxpbg" href="/pages/about/">关于</a></div><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit MuiIconButton-edgeEnd MuiIconButton-sizeLarge css-1hiehca" tabindex="0" type="button" aria-label="menu"><svg class="MuiSvgIcon-root MuiSvgIcon-colorPrimary MuiSvgIcon-fontSizeMedium css-19v1jgj" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"></path></svg></button></div></div></header><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular css-rcl8vx"></div><div class="MuiContainer-root MuiContainer-maxWidthLg css-9wvnva"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-row MuiGrid-spacing-xs-5 css-9yvo9k"><div class="MuiGrid-root MuiGrid-direction-xs-row MuiGrid-grid-xs-12 MuiGrid-grid-md-8 css-1vyu5pa"><div class="css-1x6h7g1"><h2 class="MuiTypography-root MuiTypography-h4 MuiTypography-gutterBottom css-yjjqr3">借助 GraphQL 承载 100万并发活动订阅（实时查询）</h2><p class="MuiTypography-root MuiTypography-body1 Post-date css-68xjr0">2021-03-09 10:46</p><p class="MuiTypography-root MuiTypography-body1 Post-category css-68xjr0"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-1e0j580" href="/category/前端/">前端</a></p><div class="markdown-body Content-content css-16820zy"><p>Hasura 是基于 Postgres数据库的 GraphQL 引擎，提供可控制权限的开箱即用的 GraphQL API。到 <a href="https://hasura.io/" target="_blank" rel="nofollow noopener noreferrer">hasura.io</a> 和 <a href="https://github.com/hasura/graphql-engine" target="_blank" rel="nofollow noopener noreferrer">github.com/hasura/graphql-engine</a> 了解更多。</p>
<!-- endExcerpt -->
<p>Hasura 可为客户端提供实时查询（基于 GraphQL 订阅）。例如，一个外卖应用使用实时查询显示某特定用户的订单实时状态。</p>
<p>本文档描述 Hasura 的架构，阐述它是如何支撑百万个并发实时查询的。</p>
<h2 id="原文" style="position:relative;"><a href="#%E5%8E%9F%E6%96%87" aria-label="原文 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>原文</h2>
<p><a href="https://github.com/hasura/graphql-engine/blob/master/architecture/live-queries.md" target="_blank" rel="nofollow noopener noreferrer">Scaling to 1 million active GraphQL subscriptions (live queries)</a></p>
<h2 id="目录" style="position:relative;"><a href="#%E7%9B%AE%E5%BD%95" aria-label="目录 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>目录</h2>
<ul>
<li><a href="#%E5%8E%9F%E6%96%87">原文</a></li>
<li><a href="#%E7%9B%AE%E5%BD%95">目录</a></li>
<li><a href="#%E7%BB%93%E8%AE%BA">结论</a></li>
<li><a href="#graphql-%E4%B8%8E%E8%AE%A2%E9%98%85">GraphQL 与订阅</a></li>
<li><a href="#%E5%AE%9E%E7%8E%B0-graphql-%E5%AE%9E%E6%97%B6%E6%9F%A5%E8%AF%A2">实现 GraphQL 实时查询</a>
<ul>
<li><a href="#%E5%86%8D%E8%8E%B7%E5%8F%96-graphql-%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C">再获取 GraphQL 查询结果</a></li>
<li><a href="#hasura-%E7%9A%84%E6%96%B9%E6%B3%95">Hasura 的方法</a>
<ul>
<li><a href="#%E4%B8%BB%E6%84%8F-1%E7%BC%96%E8%AF%91-%E4%B8%80%E4%B8%AA-graphql-%E6%9F%A5%E8%AF%A2%E4%B8%BA%E5%8D%95%E4%B8%AA-sql-%E6%9F%A5%E8%AF%A2">主意 #1：编译 一个 GraphQL 查询为单个 SQL 查询</a></li>
<li><a href="#%E4%B8%BB%E6%84%8F-2%E4%BD%BF%E6%8E%88%E6%9D%83%E5%85%B7%E6%9C%89%E5%A3%B0%E6%98%8E%E6%80%A7">主意 #2：使授权具有声明性</a></li>
<li><a href="#%E4%B8%BB%E6%84%8F-3%E5%9C%A8%E5%8D%95%E4%B8%AA-sql-%E6%9F%A5%E8%AF%A2%E4%B8%AD%E6%89%B9%E5%A4%84%E7%90%86%E5%A4%9A%E4%B8%AA%E5%AE%9E%E6%97%B6%E6%9F%A5%E8%AF%A2">主意 #3：在单个 SQL 查询中批处理多个实时查询</a></li>
<li><a href="#%E4%BD%95%E6%97%B6%E6%89%A7%E8%A1%8C%E5%86%8D%E8%8E%B7%E5%8F%96refetch">何时执行再获取（refetch）？</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%B5%8B%E8%AF%95">测试</a></li>
<li><a href="#%E6%9C%AC%E6%96%B9%E6%B3%95%E7%9A%84%E4%BC%98%E5%8A%BF">本方法的优势</a></li>
<li><a href="#%E6%9C%AA%E6%9D%A5%E5%B1%95%E6%9C%9B">未来展望</a></li>
</ul>
<h2 id="结论" style="position:relative;"><a href="#%E7%BB%93%E8%AE%BA" aria-label="结论 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>结论</h2>
<p><strong>设置：</strong> 每个客户端（Web 或 移动应用）用认证令牌登录并订阅一个实时查询结果。数据存放于 Postgres 数据库。每秒钟更新 Postgres 数据库中的一百万行数据，并确保推送一个新查询结果到客户端。Hasura 是 GraphQL API 的提供者（包含授权）。</p>
<p><strong>测试：</strong> Hasura 可以并发处理多少个客户端的实施订阅？Hasura 是否可以纵向或横向性能伸缩扩展？</p>
<img alt="" src="https://storage.googleapis.com/graphql-engine-cdn.hasura.io/img/subscriptions-images/main-image-fs8.png" style="width:100%;">
<img alt="single-instance-results" src="https://storage.googleapis.com/graphql-engine-cdn.hasura.io/img/subscriptions-images/images2/single-instance-fs8.png" style="width:100%;">
<table>
<thead>
<tr>
<th>单例配置</th>
<th>活动实时查询数量</th>
<th>CPU 平均负载</th>
</tr>
</thead>
<tbody>
<tr>
<td>1xCPU, 2GB RAM</td>
<td>5000</td>
<td>60%</td>
</tr>
<tr>
<td>2xCPU, 4GB RAM</td>
<td>10000</td>
<td>73%</td>
</tr>
<tr>
<td>4xCPU, 8GB RAM</td>
<td>20000</td>
<td>90%</td>
</tr>
</tbody>
</table>
<img alt="results-horizontally-scaled" src="https://storage.googleapis.com/graphql-engine-cdn.hasura.io/img/subscriptions-images/horizontal-scalability.png" style="width:100%;">
<p>当一百万个实时查询的时候，Postgres 的负载不超过 28%，连接数峰值在 850 左右。</p>
<p>关于配置的说明：</p>
<ul>
<li>AWS RDS postgres, Fargate, 使用 ELB 的默认配置，无任何微调</li>
<li>RDS Postgres: 16xCPU, 64GB RAM, Postgres 11</li>
<li>Hasura 运行在 Fargate (4xCPU, 8GB RAM per instance) ，采用默认配置</li>
</ul>
<h2 id="graphql-与订阅" style="position:relative;"><a href="#graphql-%E4%B8%8E%E8%AE%A2%E9%98%85" aria-label="graphql 与订阅 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GraphQL 与订阅</h2>
<p>GraphQL 让应用开发者轻松地从 API 中精确获取他们想要的数据。</p>
<p>比如，我们要创建一个外卖应用。Postgres 的架构看起来像这样：</p>
<img alt="postgres schema for food delivery app" src="https://storage.googleapis.com/graphql-engine-cdn.hasura.io/img/subscriptions-images/pg-schema.png" style="width:100%;">
<p>应用界面会显示当前用户订单的状态，GraphQL 查询会获取订单最新状态和配送员的定位。</p>
<img alt="order-graphql-query" src="https://storage.googleapis.com/graphql-engine-cdn.hasura.io/img/subscriptions-images/images2/basic-query-fs8.png" style="width:100%;">
<p>在底层，查询被当作字符串发送给服务器，经解析、授权后，从数据库中获取应用所需的数据。返回的 JSON 数据结构与请求时的相同。</p>
<p>进入实时查询：实时查询的主意是订阅特定查询的最新结果。一旦底层的数据改变，服务器应该推送最新结果到客户端。</p>
<p>乍一看，这完美符合 GraphQL 的使用场景，因为 GraphQL 客户端支持处理大量 WebSockets 连接。用 subscription 替换 query 就能转换查询到实时查询。就是这么简单，如果 GraphQL 服务器可实现的话。</p>
<img alt="order-subscription-query" src="https://storage.googleapis.com/graphql-engine-cdn.hasura.io/img/subscriptions-images/images2/subscription-query-fs8.png" style="width:100%;">
<h2 id="实现-graphql-实时查询" style="position:relative;"><a href="#%E5%AE%9E%E7%8E%B0-graphql-%E5%AE%9E%E6%97%B6%E6%9F%A5%E8%AF%A2" aria-label="实现 graphql 实时查询 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现 GraphQL 实时查询</h2>
<p>实现实时查询是个痛苦的过程。当你的数据库查询包含授权规则，那么当变更事件发生时，会增加查询结果的计算量。这在 web服务上是一个挑战。像 Postgres 这样的数据库，这相当于在底层表更改时，要保持物化视图最新一样困难困难。另一种方法是为特定查询重新获取全部数据（针对特定授权规则的客户端）。这是我们目前采取的方法。</p>
<p>其次，构建一个 web服务以一种可伸缩的方式来处理 websockets 有时也有点麻烦，但是某些框架和语言确实使并发编程更容易处理。</p>
<h3 id="再获取-graphql-查询结果" style="position:relative;"><a href="#%E5%86%8D%E8%8E%B7%E5%8F%96-graphql-%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C" aria-label="再获取 graphql 查询结果 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>再获取 GraphQL 查询结果</h3>
<p>为了理解为什么这里使用再获取(refetching) GraphQL 查询不好，我们来看一个典型的 GraphQL 查询过程：</p>
<img alt="graphql-resolvers" src="https://storage.googleapis.com/graphql-engine-cdn.hasura.io/img/subscriptions-images/resolvers-fs8.png" style="width:100%;">
<p>在 GraphQL 查询中，授权 + 数据获取逻辑必须为每个节点运行一次。这很可怕，因为即使稍大一点的查询都会轻易拖垮数据库。运用 ORM 不当时，N+1 问题也是个常见问题，这对数据库性能不好，且难以优化 Postgres 查询。Data loader 类型模式可以缓解该问题，但在底层仍然会多次查询 Postgres 数据库（减少为 GraphQL 查询中有多少个节点）。</p>
<p>实时查询中，该问题更为严重，因为每个客户端的查询都有一个独一无二的再获取。尽管查询是相同的，考虑到授权规则创建不同的会话变量，每个客户端需要单独的再获取。</p>
<h3 id="hasura-的方法" style="position:relative;"><a href="#hasura-%E7%9A%84%E6%96%B9%E6%B3%95" aria-label="hasura 的方法 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hasura 的方法</h3>
<p>如何做得更好？如果申明式映射数据模型到 GraphQL 模式，并使用它创建单个 SQL 数据库查询？这样就能避免多次捣鼓数据库，无论返回中是否有大量项目或 GraphQL 查询中有很多节点。</p>
<h4 id="主意-1编译-一个-graphql-查询为单个-sql-查询" style="position:relative;"><a href="#%E4%B8%BB%E6%84%8F-1%E7%BC%96%E8%AF%91-%E4%B8%80%E4%B8%AA-graphql-%E6%9F%A5%E8%AF%A2%E4%B8%BA%E5%8D%95%E4%B8%AA-sql-%E6%9F%A5%E8%AF%A2" aria-label="主意 1编译 一个 graphql 查询为单个 sql 查询 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>主意 #1：编译 一个 GraphQL 查询为单个 SQL 查询</h4>
<p>Hasura 部分功能是作为转译器，它使用数据模型到 GraphQL 模式的映射信息的元数据，编译 GraphQL 查询为 SQL 查询，来从数据库获取数据。</p>
<p>GraphQL 查询  GraphQL 抽象语法树（AST）  SQL 抽象语法树  SQL</p>
<img alt="graphql-to-sql" src="https://storage.googleapis.com/graphql-engine-cdn.hasura.io/img/subscriptions-images/graphql-2-sql-fs8.png" style="width:100%;">
<p>这消除了 N+1 查询问题，并允许数据库优化数据获取。</p>
<p>但这不够，因为解析器（resolver）还应用了授权来强制它只获取权限范围内的数据。因此我们需要将授权规则嵌入到生成的 SQL 中。</p>
<h4 id="主意-2使授权具有声明性" style="position:relative;"><a href="#%E4%B8%BB%E6%84%8F-2%E4%BD%BF%E6%8E%88%E6%9D%83%E5%85%B7%E6%9C%89%E5%A3%B0%E6%98%8E%E6%80%A7" aria-label="主意 2使授权具有声明性 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>主意 #2：使授权具有声明性</h4>
<p>访问数据时的授权本质上是一种约束，它取决于所获取的数据(或行)的值，以及动态提供的应用程序特定用户的会话变量。例如最普通的，一行数据包含表示数据所有权的字段 <code class="language-text">user_id</code>。或有个关联表 <code class="language-text">document_viewers</code> 来表示用户可查看哪些文档。其他场景中，会话变量本身可能包含与行相关的数据所有权信息，例如，账户管理员可以访问任何帐户 [1,2,3]，其中该信息不存在于当前数据库中，而是存在于会话变量（可能由其他数据系统提供）。</p>
<p>为了对此建模，我们在 API 层实现了类似于 Postgres RLS 的授权层，以提供用于配置访问控制的声明性框架。如果您熟悉 RLS，可以类比 SQL查询中的当前会话变量为来自 cookie、JWTs 或 HTTP头的 HTTP会话变量。</p>
<p>顺便说一句，因为我们在许多年前就开始了 Hasura 工程，所以我们在 Postgres RLS特性加入 Postgres 之前就在应用层实现了该特性。我们甚至在的 insert 返回子句中也有与已修复的 Postgres RLS 相同的 bug  <a href="https://www.postgresql.org/about/news/1614/%E3%80%82" target="_blank" rel="nofollow noopener noreferrer">https://www.postgresql.org/about/news/1614/。</a></p>
<p>因为在 Hasura 应用层面实现了授权（而不是使用 RLS，传递用户详情给 Postgres 连接的当前会话），这带来一个显著优势，我们等下会看到。</p>
<p>总而言之，既然授权是声明性的，并且可以在表、视图甚至函数（如果函数返回 SETOF）中使用，那么就可以创建具有授权规则的单个 SQL查询。</p>
<p>GraphQL 查询  GraphQL 抽象语法树  包含授权规则的内部抽象语法树  SQL 抽象语法树  SQL</p>
<img alt="graphql-to-sql-with-authorization" src="https://storage.googleapis.com/graphql-engine-cdn.hasura.io/img/subscriptions-images/graphql-2-sql-auth-fs8.png" style="width:100%;">
<h4 id="主意-3在单个-sql-查询中批处理多个实时查询" style="position:relative;"><a href="#%E4%B8%BB%E6%84%8F-3%E5%9C%A8%E5%8D%95%E4%B8%AA-sql-%E6%9F%A5%E8%AF%A2%E4%B8%AD%E6%89%B9%E5%A4%84%E7%90%86%E5%A4%9A%E4%B8%AA%E5%AE%9E%E6%97%B6%E6%9F%A5%E8%AF%A2" aria-label="主意 3在单个 sql 查询中批处理多个实时查询 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>主意 #3：在单个 SQL 查询中批处理多个实时查询</h4>
<p>仅凭主意 <a href="#%E4%B8%BB%E6%84%8F-1%E7%BC%96%E8%AF%91-%E4%B8%80%E4%B8%AA-graphql-%E6%9F%A5%E8%AF%A2%E4%B8%BA%E5%8D%95%E4%B8%AA-sql-%E6%9F%A5%E8%AF%A2">#1</a>、<a href="#%E4%B8%BB%E6%84%8F-2%E4%BD%BF%E6%8E%88%E6%9D%83%E5%85%B7%E6%9C%89%E5%A3%B0%E6%98%8E%E6%80%A7">#2</a> 的实现，我们仍会导致这样的情况：连接了 100k 个客户端可能会导致相称的 100k 个 Postgres查询来获取最新数据（假如 100k 个更新，每个更新对应一个客户端）。</p>
<p>然而，考虑到我们在 API层有所有应用程序用户级会话变量可用，我们实际上可以创建单个 SQL查询来一次为许多客户端再次获取数据！</p>
<p>假设有客户端运行一个订阅，以获取最新的订单状态和配送员位置。我们可以在查询中创建一个关系，其中包含作为不同行的所有查询变量（订单id）和会话变量（用户id）。然后join查询以获取具有此关系的实际数据，以确保在单个响应中获取多个客户端的最新数据。这将允许同时为多个用户获取最新的结果，即使它们提供的参数和会话变量是完全动态的，并且仅在查询时可用。</p>
<img alt="graphql-to-sql-multiplexed" src="https://storage.googleapis.com/graphql-engine-cdn.hasura.io/img/subscriptions-images/multiplexed-fs8.png" style="width:100%;">
<h4 id="何时执行再获取refetch" style="position:relative;"><a href="#%E4%BD%95%E6%97%B6%E6%89%A7%E8%A1%8C%E5%86%8D%E8%8E%B7%E5%8F%96refetch" aria-label="何时执行再获取refetch permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>何时执行再获取（refetch）？</h4>
<p>我们尝试了多种方法，获取底层数据库更新事件时来再获取查询。</p>
<ol>
<li>监听、通知：需要用触发器检测所有表，在消费端（web服务器）重启或网络中断的情况下，被消费事件可能会被丢弃。</li>
<li>WAL（译注：Write-ahead logging，预写式日志）：Reliable stream，但是 LR 插槽使得横向性能扩展非常困难，并且在托管数据库供应商上通常不可用。繁重的写入负载会污染 WAL，并且需要在应用层进行节流。</li>
</ol>
<p>在这些尝试后，我们当前回退到基于时间间隔的轮询来再获取查询。因此，我们不是在有适当事件时再获取，而是根据一个时间间隔再获取查询。这样做有两个主要原因：</p>
<ol>
<li>当实时查询中使用的声明性权限和条件很简单时，在某种程度上可以将数据库事件映射到特定客户端的动态查询上（比如 <code class="language-text">order_id</code> = 1 and <code class="language-text">user_id</code> = cookie.<code class="language-text">session_id</code>），但是对于复杂的查询会变得棘手（比如查询 <code class="language-text">'status' ILIKE 'failed_%'</code>）。声明性权限有时也可以跨表使用。我们在研究这种方法以及基本的增量更新方面投入了大量的精力，并且在生产中有<a href="https://www.postgresql.eu/events/pgconfeu2018/sessions/session/2195/slides/144/Implementing%20Incremental%20View%20Maintenance%20on%20PostgreSQL%20.pdf" target="_blank" rel="nofollow noopener noreferrer">几个小项目</a>采用了类似的方法。</li>
<li>对于任何应用程序，除非写吞吐量很小，否则无论如何，您最终都会在一个时间间隔内对事件进行节流/防抖（throttling/debouncing）。</li>
</ol>
<p>这种方法的缺点是写负载很小时存在延迟。再获取可以立即完成，而不是在几毫秒后。通过适当地调整再获取间隔和批量大小，可以容易地缓解这一问题。到目前为止，我们首先关注的是消除开销最大的瓶颈，即再获取查询。也就是说，我们将在接下来的几个月里继续关注改进，特别是使用事件依赖（在适用的情况下），来潜在地减少实时查询中每隔一段时间再获取的的数量。</p>
<p>请注意，我们在内部有其他基于事件的方法的驱动程序，如果你有一个用例，目前的方法不能满足你的要求，我们愿意与你合作与提供协助！</p>
<h2 id="测试" style="position:relative;"><a href="#%E6%B5%8B%E8%AF%95" aria-label="测试 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>测试</h2>
<p>测试基于 Websockets 的实时查询的性能扩展性与可靠性是一项挑战。我们花了几周来构建测试套件和基础自动化工具。设置如下所示：</p>
<ol>
<li>一个 nodejs脚本，它运行大量的 GraphQL实时查询客户端，并在内存中记录事件，这些事件随后被存储到数据库中。<a href="https://github.com/hasura/subscription-benchmark" target="_blank" rel="nofollow noopener noreferrer">[github]</a></li>
<li>一个在数据库上创建写负载的脚本，从而导致所有运行实时查询的客户端之间发生更改（每秒更新一百万行）。</li>
<li>一旦测试套件完成运行，验证脚本就会在数据库中运行，在该数据库中提取日志/事件以验证没有错误并且所有事件已被接收到。</li>
<li>仅在以下情况下才认为测试有效：
<ul>
<li>收到的有效载荷错误数为 0</li>
<li>从创建事件到客户端接收的平均延迟小于 1000毫秒</li>
</ul>
</li>
</ol>
<img alt="testing-architecture" src="https://storage.googleapis.com/graphql-engine-cdn.hasura.io/img/subscriptions-images/test-architecture.png" style="width:100%;">
<h2 id="本方法的优势" style="position:relative;"><a href="#%E6%9C%AC%E6%96%B9%E6%B3%95%E7%9A%84%E4%BC%98%E5%8A%BF" aria-label="本方法的优势 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>本方法的优势</h2>
<p>Hasura 使实时查询变得触手可及。查询的概念很容易扩展到实时查询，而不需要使用 GraphQL 的开发人员做任何额外工作。这对我们来说是最重要的。</p>
<ol>
<li>功能特性丰富的实时查询，全面支持 Postgres operators/aggregations/views/functions 等</li>
<li>性能可估</li>
<li>性能可纵向与横向伸缩扩展</li>
<li>可运行于所有云、数据库供应商平台</li>
</ol>
<h2 id="未来展望" style="position:relative;"><a href="#%E6%9C%AA%E6%9D%A5%E5%B1%95%E6%9C%9B" aria-label="未来展望 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>未来展望</h2>
<p>减少 Postgres 负载，通过：</p>
<ol>
<li>映射事件到实时查询</li>
<li>结果集的增量计算</li>
</ol></div><div class="Post-tagList MuiBox-root css-1yuhvjn"><a class="MuiButtonBase-root MuiChip-root MuiChip-outlined MuiChip-sizeMedium MuiChip-colorDefault MuiChip-clickable MuiChip-clickableColorDefault MuiChip-outlinedDefault Post-chip css-wwkjos" tabindex="0" href="/tag/graph-ql/"><span class="MuiChip-label MuiChip-labelMedium css-qbwvub">GraphQL</span></a><a class="MuiButtonBase-root MuiChip-root MuiChip-outlined MuiChip-sizeMedium MuiChip-colorDefault MuiChip-clickable MuiChip-clickableColorDefault MuiChip-outlinedDefault Post-chip css-wwkjos" tabindex="0" href="/tag/postgres/"><span class="MuiChip-label MuiChip-labelMedium css-qbwvub">Postgres</span></a><a class="MuiButtonBase-root MuiChip-root MuiChip-outlined MuiChip-sizeMedium MuiChip-colorDefault MuiChip-clickable MuiChip-clickableColorDefault MuiChip-outlinedDefault Post-chip css-wwkjos" tabindex="0" href="/tag/hasura/"><span class="MuiChip-label MuiChip-labelMedium css-qbwvub">Hasura</span></a><a class="MuiButtonBase-root MuiChip-root MuiChip-outlined MuiChip-sizeMedium MuiChip-colorDefault MuiChip-clickable MuiChip-clickableColorDefault MuiChip-outlinedDefault Post-chip css-wwkjos" tabindex="0" href="/tag/web-sockets/"><span class="MuiChip-label MuiChip-labelMedium css-qbwvub">WebSockets</span></a><a class="MuiButtonBase-root MuiChip-root MuiChip-outlined MuiChip-sizeMedium MuiChip-colorDefault MuiChip-clickable MuiChip-clickableColorDefault MuiChip-outlinedDefault Post-chip css-wwkjos" tabindex="0" href="/tag/realtime/"><span class="MuiChip-label MuiChip-labelMedium css-qbwvub">realtime</span></a><a class="MuiButtonBase-root MuiChip-root MuiChip-outlined MuiChip-sizeMedium MuiChip-colorDefault MuiChip-clickable MuiChip-clickableColorDefault MuiChip-outlinedDefault Post-chip css-wwkjos" tabindex="0" href="/tag/翻译/"><span class="MuiChip-label MuiChip-labelMedium css-qbwvub">翻译</span></a></div><div class="MuiBox-root css-13dgk6d"><h2 class="MuiTypography-root MuiTypography-h6 css-1cef0gz">分享</h2><button tabindex="0" role="button" class="react-share__ShareButton MuiButtonBase-root Post-shareButton css-hkx3jt"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 263 448"><path d="M239.75 3v66h-39.25c-30.75 0-36.5 14.75-36.5 36v47.25h73.25l-9.75 74h-63.5v189.75h-76.5v-189.75h-63.75v-74h63.75v-54.5c0-63.25 38.75-97.75 95.25-97.75 27 0 50.25 2 57 3z"></path></svg></button><button tabindex="0" role="button" class="react-share__ShareButton MuiButtonBase-root Post-shareButton css-hkx3jt"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 1200 1227"><path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"></path></svg></button><button tabindex="0" role="button" class="react-share__ShareButton MuiButtonBase-root Post-shareButton css-hkx3jt"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 384 448"><path d="M87.25 156.25v247.75h-82.5v-247.75h82.5zM92.5 79.75c0.25 23.75-17.75 42.75-46.5 42.75v0h-0.5c-27.75 0-45.5-19-45.5-42.75 0-24.25 18.5-42.75 46.5-42.75 28.25 0 45.75 18.5 46 42.75zM384 262v142h-82.25v-132.5c0-33.25-12-56-41.75-56-22.75 0-36.25 15.25-42.25 30-2 5.5-2.75 12.75-2.75 20.25v138.25h-82.25c1-224.5 0-247.75 0-247.75h82.25v36h-0.5c10.75-17 30.25-41.75 74.75-41.75 54.25 0 94.75 35.5 94.75 111.5z"></path></svg></button><button tabindex="0" role="button" class="react-share__ShareButton MuiButtonBase-root Post-shareButton css-hkx3jt"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 448 448"><path d="M297.25 326.75l36.75-173.25c3.25-15.25-5.5-21.25-15.5-17.5l-216 83.25c-14.75 5.75-14.5 14-2.5 17.75l55.25 17.25 128.25-80.75c6-4 11.5-1.75 7 2.25l-103.75 93.75-4 57c5.75 0 8.25-2.5 11.25-5.5l27-26 56 41.25c10.25 5.75 17.5 2.75 20.25-9.5zM448 224c0 123.75-100.25 224-224 224s-224-100.25-224-224 100.25-224 224-224 224 100.25 224 224z"></path></svg></button></div></div><div class="MuiBox-root css-1ebprri"><div class="MuiGrid-root MuiGrid-container MuiGrid-wrap-xs-nowrap MuiGrid-direction-xs-row css-hibhi5"><div class="MuiGrid-root MuiGrid-direction-xs-row css-1n5khr6"><a class="MuiTypography-root MuiTypography-h6 MuiLink-root MuiLink-underlineAlways css-1ubjslf" rel="prev" href="/2020/11/frontend-dynamic-plugin-implement/">← <!-- -->前端动态插件的实现 with Apollo &amp; React</a></div><div class="MuiGrid-root MuiGrid-direction-xs-row Pagination-nextNav css-1n5khr6"><a class="MuiTypography-root MuiTypography-h6 MuiLink-root MuiLink-underlineAlways css-1ubjslf" rel="next" href="/2021/03/askent-realtime-search-implement-and-hasura/">Askent 实时消息搜索的问题及 Hasura 替代<!-- --> →</a></div></div></div><div><div id="disqus_thread"></div></div></div><div class="MuiGrid-root MuiGrid-direction-xs-row MuiGrid-grid-xs-12 MuiGrid-grid-md-4 css-20tnkx"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-row MuiGrid-spacing-xs-4 css-199nrdm"><div class="MuiGrid-root MuiGrid-direction-xs-row MuiGrid-grid-xs-12 MuiGrid-grid-sm-6 MuiGrid-grid-md-12 css-fhbwnz"><div class="MuiBox-root css-0"><div class="MuiBox-root css-18b9ajk"><h6 class="MuiTypography-root MuiTypography-subtitle1 css-penf9g">分类</h6><a class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall css-xz9haa" tabindex="0" aria-label="more" title="全部" href="/categories/"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"></path></svg></a></div><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Categories-link css-15zfxqh" href="/category/信息安全/">信息安全 (4)</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Categories-link css-15zfxqh" href="/category/前端/">前端 (18)</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Categories-link css-15zfxqh" href="/category/小玩意/">小玩意 (13)</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Categories-link css-15zfxqh" href="/category/旅行/">旅行 (2)</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Categories-link css-15zfxqh" href="/category/短片/">短片 (8)</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Categories-link css-15zfxqh" href="/category/观点/">观点 (13)</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Categories-link css-15zfxqh" href="/category/读书/">读书 (1)</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Categories-link css-15zfxqh" href="/category/音乐/">音乐 (2)</a></div></div><div class="MuiGrid-root MuiGrid-direction-xs-row MuiGrid-grid-xs-12 MuiGrid-grid-sm-6 MuiGrid-grid-md-12 css-fhbwnz"><div class="MuiBox-root css-0"><div class="MuiBox-root css-18b9ajk"><h6 class="MuiTypography-root MuiTypography-subtitle1 css-penf9g">随机标签</h6><a class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall css-xz9haa" tabindex="0" aria-label="more" title="全部" href="/tags/"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"></path></svg></a></div><div class="MuiBox-root css-tzdv1b"><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/路由器/">路由器</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/pc/">PC</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/开箱/">开箱</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/javascript/">Javascript</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/covid-19/">COVID-19</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/movies/">movies</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/orm/">ORM</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/wordpress/">Wordpress</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/社交媒体/">社交媒体</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/回顾/">回顾</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/升级/">升级</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/pubsub/">pubsub</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/realtime/">realtime</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/autocrasy/">autocrasy</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/教程/">教程</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/迁移/">迁移</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/xpenlogy/">Xpenlogy</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/red-pill/">RedPill</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/social-media/">social media</a><a class="MuiTypography-root MuiTypography-body1 MuiTypography-noWrap MuiLink-root MuiLink-underlineNone Tags-tagLink css-16d0jw" href="/tag/翻译/">翻译</a></div></div></div></div></div></div><footer style="background-color:#fff;margin-top:48px"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-row MuiGrid-spacing-xs-3 css-177xvbk"><div class="MuiGrid-root MuiGrid-direction-xs-row MuiGrid-grid-md-4 css-1rfyg05"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-18q3puk" href="/page/">文章</a>|<a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-18q3puk" href="https://www.awildpetcat.com/" target="_blank" rel="noopener">自由的家猫</a>|<a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-18q3puk" href="https://museum.berlinchan.com/" target="_blank" rel="noopener">旧站博物馆</a>|<a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-18q3puk" href="/pages/about/">关于</a></div><div class="MuiGrid-root MuiGrid-direction-xs-row MuiGrid-grid-sm-6 MuiGrid-grid-md-4 css-1pdhekk"><a class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeLarge css-deih4v" tabindex="0" href="https://www.x.com/BerlinChanCom" target="_blank" rel="noopener"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 1200 1227"><path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"></path></svg></a><a class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeLarge css-deih4v" tabindex="0" href="https://www.youtube.com/user/berlinchancom" target="_blank" rel="noopener"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 448 448"><path d="M177.75 282l121-62.5-121-63.25v125.75zM224 66.5c94.25 0 156.75 4.5 156.75 4.5 8.75 1 28 1 45 19 0 0 13.75 13.5 17.75 44.5 4.75 36.25 4.5 72.5 4.5 72.5v34s0.25 36.25-4.5 72.5c-4 30.75-17.75 44.5-17.75 44.5-17 17.75-36.25 17.75-45 18.75 0 0-62.5 4.75-156.75 4.75v0c-116.5-1-152.25-4.5-152.25-4.5-10-1.75-32.5-1.25-49.5-19 0 0-13.75-13.75-17.75-44.5-4.75-36.25-4.5-72.5-4.5-72.5v-34s-0.25-36.25 4.5-72.5c4-31 17.75-44.5 17.75-44.5 17-18 36.25-18 45-19 0 0 62.5-4.5 156.75-4.5v0z"></path></svg></a><a class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeLarge css-deih4v" tabindex="0" href="https://www.facebook.com/berlinchancom" target="_blank" rel="noopener"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 263 448"><path d="M239.75 3v66h-39.25c-30.75 0-36.5 14.75-36.5 36v47.25h73.25l-9.75 74h-63.5v189.75h-76.5v-189.75h-63.75v-74h63.75v-54.5c0-63.25 38.75-97.75 95.25-97.75 27 0 50.25 2 57 3z"></path></svg></a><a class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeLarge css-deih4v" tabindex="0" href="https://www.linkedin.com/in/berlinchan" target="_blank" rel="noopener"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 384 448"><path d="M87.25 156.25v247.75h-82.5v-247.75h82.5zM92.5 79.75c0.25 23.75-17.75 42.75-46.5 42.75v0h-0.5c-27.75 0-45.5-19-45.5-42.75 0-24.25 18.5-42.75 46.5-42.75 28.25 0 45.75 18.5 46 42.75zM384 262v142h-82.25v-132.5c0-33.25-12-56-41.75-56-22.75 0-36.25 15.25-42.25 30-2 5.5-2.75 12.75-2.75 20.25v138.25h-82.25c1-224.5 0-247.75 0-247.75h82.25v36h-0.5c10.75-17 30.25-41.75 74.75-41.75 54.25 0 94.75 35.5 94.75 111.5z"></path></svg></a><a class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeLarge css-deih4v" tabindex="0" href="https://github.com/BerlinChan" target="_blank" rel="noopener"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 384 448"><path d="M192 32c106 0 192 86 192 192 0 84.75-55 156.75-131.25 182.25-9.75 1.75-13.25-4.25-13.25-9.25 0-6.25 0.25-27 0.25-52.75 0-18-6-29.5-13-35.5 42.75-4.75 87.75-21 87.75-94.75 0-21-7.5-38-19.75-51.5 2-5 8.5-24.5-2-51-16-5-52.75 19.75-52.75 19.75-15.25-4.25-31.75-6.5-48-6.5s-32.75 2.25-48 6.5c0 0-36.75-24.75-52.75-19.75-10.5 26.5-4 46-2 51-12.25 13.5-19.75 30.5-19.75 51.5 0 73.5 44.75 90 87.5 94.75-5.5 5-10.5 13.5-12.25 25.75-11 5-39 13.5-55.75-16-10.5-18.25-29.5-19.75-29.5-19.75-18.75-0.25-1.25 11.75-1.25 11.75 12.5 5.75 21.25 28 21.25 28 11.25 34.25 64.75 22.75 64.75 22.75 0 16 0.25 31 0.25 35.75 0 5-3.5 11-13.25 9.25-76.25-25.5-131.25-97.5-131.25-182.25 0-106 86-192 192-192zM72.75 307.75c0.5-1-0.25-2.25-1.75-3-1.5-0.5-2.75-0.25-3.25 0.5-0.5 1 0.25 2.25 1.75 3 1.25 0.75 2.75 0.5 3.25-0.5zM80.5 316.25c1-0.75 0.75-2.5-0.5-4-1.25-1.25-3-1.75-4-0.75-1 0.75-0.75 2.5 0.5 4 1.25 1.25 3 1.75 4 0.75zM88 327.5c1.25-1 1.25-3 0-4.75-1-1.75-3-2.5-4.25-1.5-1.25 0.75-1.25 2.75 0 4.5s3.25 2.5 4.25 1.75zM98.5 338c1-1 0.5-3.25-1-4.75-1.75-1.75-4-2-5-0.75-1.25 1-0.75 3.25 1 4.75 1.75 1.75 4 2 5 0.75zM112.75 344.25c0.5-1.5-1-3.25-3.25-4-2-0.5-4.25 0.25-4.75 1.75s1 3.25 3.25 3.75c2 0.75 4.25 0 4.75-1.5zM128.5 345.5c0-1.75-2-3-4.25-2.75-2.25 0-4 1.25-4 2.75 0 1.75 1.75 3 4.25 2.75 2.25 0 4-1.25 4-2.75zM143 343c-0.25-1.5-2.25-2.5-4.5-2.25-2.25 0.5-3.75 2-3.5 3.75 0.25 1.5 2.25 2.5 4.5 2s3.75-2 3.5-3.5z"></path></svg></a><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeLarge css-deih4v" tabindex="0" type="button"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 512 448"><path d="M145 115.25c0-13.75-9-22.75-22.75-22.75-13.5 0-27.25 9-27.25 22.75 0 13.5 13.75 22.5 27.25 22.5 13.75 0 22.75-9 22.75-22.5zM330.75 242c0-9-9-18-22.75-18-9 0-18 9-18 18 0 9.25 9 18.25 18 18.25 13.75 0 22.75-9 22.75-18.25zM271.75 115.25c0-13.75-9-22.75-22.5-22.75-13.75 0-27.25 9-27.25 22.75 0 13.5 13.5 22.5 27.25 22.5 13.5 0 22.5-9 22.5-22.5zM430.5 242c0-9-9.25-18-22.75-18-9 0-18 9-18 18 0 9.25 9 18.25 18 18.25 13.5 0 22.75-9 22.75-18.25zM364 142.75c-5.75-0.75-11.5-1-17.5-1-86 0-154 64.25-154 143.25 0 13.25 2 26 5.75 38-5.75 0.5-11.25 0.75-17 0.75-22.75 0-40.75-4.5-63.5-9l-63.25 31.75 18-54.5c-45.25-31.75-72.5-72.75-72.5-122.5 0-86.25 81.5-154 181.25-154 89 0 167.25 54.25 182.75 127.25zM512 283c0 40.75-27 77-63.5 104.25l13.75 45.25-49.75-27.25c-18.25 4.5-36.5 9.25-54.5 9.25-86.25 0-154-59-154-131.5s67.75-131.5 154-131.5c81.5 0 154 59 154 131.5z"></path></svg></button><a class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeLarge css-deih4v" tabindex="0" href="/rss.xml" target="_blank" rel="noopener"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 352 448"><path d="M96 336c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zM224 366.75c0.25 4.5-1.25 8.75-4.25 12-3 3.5-7.25 5.25-11.75 5.25h-33.75c-8.25 0-15-6.25-15.75-14.5-7.25-76.25-67.75-136.75-144-144-8.25-0.75-14.5-7.5-14.5-15.75v-33.75c0-4.5 1.75-8.75 5.25-11.75 2.75-2.75 6.75-4.25 10.75-4.25h1.25c53.25 4.25 103.5 27.5 141.25 65.5 38 37.75 61.25 88 65.5 141.25zM352 367.25c0.25 4.25-1.25 8.5-4.5 11.75-3 3.25-7 5-11.5 5h-35.75c-8.5 0-15.5-6.5-16-15-8.25-145.25-124-261-269.25-269.5-8.5-0.5-15-7.5-15-15.75v-35.75c0-4.5 1.75-8.5 5-11.5 3-3 7-4.5 11-4.5h0.75c87.5 4.5 169.75 41.25 231.75 103.5 62.25 62 99 144.25 103.5 231.75z"></path></svg></a></div><div class="MuiGrid-root MuiGrid-direction-xs-row MuiGrid-grid-sm-6 MuiGrid-grid-md-4 css-14ecud3"><p class="MuiTypography-root MuiTypography-body2 css-2zp2ut">本站作品采用<a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-18q3puk" href="http://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener">知识共享署名 4.0 国际许可协议</a>进行许可。</p></div></div></footer></div><div role="presentation" style="transform:scale(0);visibility:hidden"><button class="MuiButtonBase-root MuiFab-root MuiFab-circular MuiFab-sizeMedium MuiFab-secondary MuiFab-root MuiFab-circular MuiFab-sizeMedium MuiFab-secondary css-osloyf" tabindex="0" type="button" aria-label="scroll back to top"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></svg></button></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2021/03/Scaling-to-1-million-active-GraphQL-subscriptions/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-c6865c9baaa9b5cfc3a0.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-e3e858f0d162b82bb8c4.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-7ed2988234035798db9f.js\"],\"component---src-templates-categories-list-template-js\":[\"/component---src-templates-categories-list-template-js-db12dcc24bdd4274414f.js\"],\"component---src-templates-category-template-js\":[\"/component---src-templates-category-template-js-e37b24751063f6224b3c.js\"],\"component---src-templates-not-found-template-js\":[\"/component---src-templates-not-found-template-js-a7555e37ec6b40539612.js\"],\"component---src-templates-page-template-js\":[\"/component---src-templates-page-template-js-03edb85a094858ff911b.js\"],\"component---src-templates-post-archived-blog-template-js\":[\"/component---src-templates-post-archived-blog-template-js-488843c3c3a0da09fec4.js\"],\"component---src-templates-post-list-archived-blog-template-js\":[\"/component---src-templates-post-list-archived-blog-template-js-3fc40d7e8e48d2ff218d.js\"],\"component---src-templates-post-list-template-js\":[\"/component---src-templates-post-list-template-js-a5b39a29aac492f9c516.js\"],\"component---src-templates-post-template-js\":[\"/component---src-templates-post-template-js-646d0b53ed135f844872.js\"],\"component---src-templates-tag-template-js\":[\"/component---src-templates-tag-template-js-433cf1fef78041ff2943.js\"],\"component---src-templates-tags-list-template-js\":[\"/component---src-templates-tags-list-template-js-582f9646257b410ed192.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="e158bc8767acbe06329e";</script><script src="/webpack-runtime-9c24a38e3fda98fe719c.js" async></script><script src="/framework-0dfb2f11d03084e0e7cb.js" async></script><script src="/app-c6865c9baaa9b5cfc3a0.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>